/*! For license information please see main.a96746b2.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case A:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,xe=null;function Ae(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Ee||null!==xe)&&(Ce(),Se())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,Ve=null,je={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Ue=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Et,xt,At,Tt=!1,St=[],It=null,Ct=null,Nt=null,Rt=new Map,Dt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function jt(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(Vt),Dt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<St.length){zt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=U({},cn,{view:0,detail:0}),hn=an(fn),dn=U({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),yn=an(U({},fn,{relatedTarget:0})),mn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return xn}var Tn=U({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),In=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(U({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Nn=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},xr={};function Ar(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Ar("animationend"),Sr=Ar("animationiteration"),Ir=Ar("animationstart"),Cr=Ar("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Pr=Rr[Or];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Sr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Tr:case Sr:case Ir:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Hn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&jn(e,t)?(e=en(),$t=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],Ei=-1;function xi(e){return{current:e}}function Ai(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ti(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Si={},Ii=xi(Si),Ci=xi(!1),Ni=Si;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ai(Ci),Ai(Ii)}function Pi(e,t,n){if(Ii.current!==Si)throw Error(a(168));Ti(Ii,t),Ti(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ni=Ii.current,Ti(Ii,e),Ti(Ci,Ci.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ci),Ai(Ii),Ti(Ii,e)):Ai(Ci),Ti(Ci,n)}var Fi=null,Vi=!1,ji=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!ji&&null!==Fi){ji=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke($e,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function $i(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=xi(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ai(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Sa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Us|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(i=Di(t)?Ni:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Aa(a):(a=Di(t)?Ni:Ii.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Zi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Zi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Zi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Zi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),Za={},$a=xi(Za),eo=xi(Za),to=xi(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai($a),Ti($a,t)}function io(){Ai($a),Ai(eo),Ai(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti($a,n))}function oo(e){eo.current===e&&(Ai($a),Ai(eo))}var uo=xi(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Ao(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Us|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Us|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Uo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return So().memoizedState}function zo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Us|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Aa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Aa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Aa,useCallback:Xo,useContext:Aa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Co,useRef:jo,useState:function(){return Co(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(So(),yo.memoizedState,e)},useTransition:function(){return[Co(Io)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Aa,useCallback:Xo,useContext:Aa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Zo(t,yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=Ao(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function xu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Su(e,t,n,r,i)}function Au(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Di(n)?Ni:Ii.current;return a=Ri(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=Ao(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(xa(t,i),null===t.stateNode)Hu(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Ri(t,c=Di(n)?Ni:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ha(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Ua(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Na||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Aa(s):s=Ri(t,s=Di(n)?Ni:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ha(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Ua(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Na||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ou,Pu,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Uc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Uu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Uu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return yc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Uu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Di(t.type)&&Oi(),Ku(t),null;case 3:return r=t.stateNode,io(),Ai(Ci),Ai(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":G(r),$(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Ai(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),Ou(e,t),null===e&&Br(t.stateNode.containerInfo),Ku(t),null;case 10:return _a(t.type._context),Ku(t),null;case 19:if(Ai(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ai(Ci),Ai(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ai(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,Ju=!1,Zu="function"===typeof WeakSet?WeakSet:Set,$u=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ac(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ac(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ac(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ac(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ac(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ac(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ac(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ac(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ys(t,e),Ju=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for($u=e,f=e.child;null!==f;){for(h=$u=f;null!==$u;){switch(p=(d=$u).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ac(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,$u=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ac(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ac(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ac(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){$u=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Xu;var c=Ju;if(Xu=o,(Ju=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?Es(i):null!==s?(s.return=o,$u=s):Es(i);for(;null!==a;)$u=a,bs(a,t,n),a=a.sibling;$u=i,Xu=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):ws(e)}}function ws(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ac(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function _s(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function Es(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ac(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ac(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ac(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ac(t,o,s)}}}catch(s){Ac(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var xs,As=Math.ceil,Ts=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Cs=0,Ns=null,Rs=null,Ds=0,Os=0,Ps=xi(0),Ls=0,Ms=null,Us=0,Fs=0,Vs=0,js=null,zs=null,Bs=0,qs=1/0,Hs=null,Ws=!1,Gs=null,Ks=null,Qs=!1,Ys=null,Xs=0,Js=0,Zs=null,$s=-1,ec=0;function tc(){return 0!==(6&Cs)?Je():-1!==$s?$s:$s=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Zs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Ls&&sc(e,Ds)),ic(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Je()+500,Vi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($s=-1,ec=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Ns===e&&Ds===t||(Hs=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ts.current=o,Cs=i,null!==Rs?t=0:(Ns=null,Ds=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Hs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Hs),t);break}_c(e,zs,Hs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*As(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Hs),r);break}_c(e,zs,Hs);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cs))throw Error(a(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Hs),ic(e,Je()),null}function lc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Je()+500,Vi&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Cs)&&Ec();var t=Cs;Cs|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Cs=t))&&Bi()}}function hc(){Os=Ps.current,Ai(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ai(Ci),Ai(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ai(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Rs=e=Pc(e.current,null),Ds=Os=t,Ls=0,Ms=null,Vs=Fs=Us=0,zs=js=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Rs;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Ls=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Us)&&0===(268435455&Fs)||sc(Ns,Ds)}function mc(e,t){var n=Cs;Cs|=2;var r=vc();for(Ns===e&&Ds===t||(Hs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Cs=n,Ts.current=r,null!==Rs)throw Error(a(261));return Ns=null,Ds=0,Ls}function gc(){for(;null!==Rs;)bc(Rs)}function kc(){for(;null!==Rs&&!Ye();)bc(Rs)}function bc(e){var t=xs(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Rs=t,Ss.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Rs=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Ls=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==Ys);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Rs=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ac(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),Cs=s,kt=u,Is.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Xs=i),o=e.pendingLanes,0===o&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Gs,Gs=null,e;0!==(1&Xs)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Zs?Js++:(Js=0,Zs=e):Js=0,Bi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function Ec(){if(null!==Ys){var e=bt(Xs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(os(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var b=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,$u=b;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ac(s,s.return,_)}if(s===u){$u=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,$u=w;break e}$u=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function xc(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ac(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Ls||3===Ls&&(130023424&Ds)===Ds&&500>Je()-Bs?dc(e,0):Vs|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(mt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case x:u=8,i|=8;break;case A:return(e=Dc(12,n,t,2|i)).elementType=A,e.lanes=o,e;case C:return(e=Dc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case I:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Au(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=Ao();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Ua(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ea(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Aa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Eu(e,t,r,i=ya(r.type,i),n);case 15:return xu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Hu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,xa(t,n),qa(t,r,i),Wa(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Au(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Cs)&&(qs=Je()+500,Bi()))}break;case 13:fc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},xt=function(){return kt},At=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ce=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Se,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+I(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,A=null,T=-1,S=5,I=-1;function C(){return!(t.unstable_now()-I<S)}function N(){if(null!==A){var e=t.unstable_now();I=e;var n=!0;try{n=A(!0,e)}finally{n?E():(x=!1,A=null)}}else x=!1}if("function"===typeof k)E=function(){k(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=N,E=function(){D.postMessage(null)}}else E=function(){m(N,0)};function O(e){A=e,x||(x=!0,E())}function P(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e=n(791),t=n.t(e,2),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return f=l()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},f.apply(null,arguments)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(){y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:E(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(I([])));k&&k!==t&&n.call(k,a)&&(m=k);var b=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function m(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){m(a,r,i,o,u,"next",e)}function u(e){m(a,r,i,o,u,"throw",e)}o(void 0)}))}}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t=l();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function _(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e){return function(e){if(Array.isArray(e))return a(e)}(e)||_(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function S(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t="function"===typeof Map?new Map:void 0;return C=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},C(e)}var N=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(N(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},D=function(e){return function(e){var t=N(e);return R.encodeByteArray(t,!0)}(e).replace(/\./g,"")},O=function(e){try{return R.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},L=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&O(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},M=function(e){var t,n;return null===(n=null===(t=L())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},U=function(e){var t=M(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},F=function(){var e;return null===(e=L())||void 0===e?void 0:e.config},V=function(e){var t;return null===(t=L())||void 0===t?void 0:t["_".concat(e)]},j=function(){function e(){var t=this;x(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return S(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function z(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}function B(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){var e,t=null===(e=L())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function H(){try{return"object"===typeof indexedDB}catch(e){return!1}}var W="FirebaseError",G=function(e){k(n,e);var t=w(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name=W,Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),K.prototype.create),a}return S(n)}(C(Error)),K=function(){function e(t,n,r){x(this,e),this.service=t,this.serviceName=n,this.errors=r}return S(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Q,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new G(n,a,t)}}]),e}();var Q=/\{\$([^}]+)}/g;function Y(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(X(u)&&X(s)){if(!Y(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function X(e){return null!==e&&"object"===typeof e}function J(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Z(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function $(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ee=function(){function e(t,n){var r=this;x(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return S(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=te),void 0===r.error&&(r.error=te),void 0===r.complete&&(r.complete=te);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function te(){}function ne(e){return e&&e._delegate?e._delegate:e}var re=function(){function e(t,n,r){x(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return S(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ie="[DEFAULT]",ae=function(){function e(t,n){x(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return S(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new j;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(c){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(E(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),E(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=p(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ih){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ie?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ih){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie;return this.component?this.component.multipleInstances?e:ie:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var oe,ue,se=function(){function e(t){x(this,e),this.name=t,this.providers=new Map}return S(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ae(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ce=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ue||(ue={}));var le={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},fe=ue.INFO,he=(I(oe={},ue.DEBUG,"log"),I(oe,ue.VERBOSE,"log"),I(oe,ue.INFO,"info"),I(oe,ue.WARN,"warn"),I(oe,ue.ERROR,"error"),oe),de=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=he[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},pe=function(){function e(t){x(this,e),this.name=t,this._logLevel=fe,this._logHandler=de,this._userLogHandler=null,ce.push(this)}return S(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ue))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?le[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.DEBUG].concat(t)),this._logHandler.apply(this,[this,ue.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ue.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.INFO].concat(t)),this._logHandler.apply(this,[this,ue.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.WARN].concat(t)),this._logHandler.apply(this,[this,ue.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ue.ERROR].concat(t)),this._logHandler.apply(this,[this,ue.ERROR].concat(t))}}]),e}();function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me,ge,ke=function(e,t){return t.some((function(t){return e instanceof t}))};var be=new WeakMap,we=new WeakMap,_e=new WeakMap,Ee=new WeakMap,xe=new WeakMap;var Ae={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return we.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ie(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Te(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ce(this),n),Ie(be.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(e.apply(Ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ce(this),t].concat(r));return _e.set(a,t.sort?t.sort():[t]),Ie(a)}}function Se(e){return"function"===typeof e?Te(e):(e instanceof IDBTransaction&&function(e){if(!we.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));we.set(e,t)}}(e),ke(e,me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ae):e)}function Ie(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ie(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&be.set(t,e)})).catch((function(){})),xe.set(t,e),t}(e);if(Ee.has(e))return Ee.get(e);var t=Se(e);return t!==e&&(Ee.set(e,t),xe.set(t,e)),t}var Ce=function(e){return xe.get(e)};var Ne,Re,De=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],Pe=new Map;function Le(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Pe.get(t))return Pe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Oe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||De.includes(n))){var a=function(){var e=g(y().mark((function e(t){var a,o,u,s,c,l,f=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Pe.set(t,a),a}}}Ae=function(e){return ye(ye({},e),{},{get:function(t,n,r){return Le(t,n)||e.get(t,n,r)},has:function(t,n){return!!Le(t,n)||e.has(t,n)}})}(Ae);var Me=function(){function e(t){x(this,e),this.container=t}return S(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ue="@firebase/app",Fe="0.9.3",Ve=new pe("@firebase/app"),je="[DEFAULT]",ze=(I(Ne={},Ue,"fire-core"),I(Ne,"@firebase/app-compat","fire-core-compat"),I(Ne,"@firebase/analytics","fire-analytics"),I(Ne,"@firebase/analytics-compat","fire-analytics-compat"),I(Ne,"@firebase/app-check","fire-app-check"),I(Ne,"@firebase/app-check-compat","fire-app-check-compat"),I(Ne,"@firebase/auth","fire-auth"),I(Ne,"@firebase/auth-compat","fire-auth-compat"),I(Ne,"@firebase/database","fire-rtdb"),I(Ne,"@firebase/database-compat","fire-rtdb-compat"),I(Ne,"@firebase/functions","fire-fn"),I(Ne,"@firebase/functions-compat","fire-fn-compat"),I(Ne,"@firebase/installations","fire-iid"),I(Ne,"@firebase/installations-compat","fire-iid-compat"),I(Ne,"@firebase/messaging","fire-fcm"),I(Ne,"@firebase/messaging-compat","fire-fcm-compat"),I(Ne,"@firebase/performance","fire-perf"),I(Ne,"@firebase/performance-compat","fire-perf-compat"),I(Ne,"@firebase/remote-config","fire-rc"),I(Ne,"@firebase/remote-config-compat","fire-rc-compat"),I(Ne,"@firebase/storage","fire-gcs"),I(Ne,"@firebase/storage-compat","fire-gcs-compat"),I(Ne,"@firebase/firestore","fire-fst"),I(Ne,"@firebase/firestore-compat","fire-fst-compat"),I(Ne,"fire-js","fire-js"),I(Ne,"firebase","fire-js-all"),Ne),Be=new Map,qe=new Map;function He(e,t){try{e.container.addComponent(t)}catch(n){Ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function We(e){var t=e.name;if(qe.has(t))return Ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;qe.set(t,e);var n,r=p(Be.values());try{for(r.s();!(n=r.n()).done;){He(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ge(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Ke=(I(Re={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(Re,"bad-app-name","Illegal App name: '{$appName}"),I(Re,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),I(Re,"app-deleted","Firebase App named '{$appName}' already deleted"),I(Re,"no-options","Need to provide options, when not being deployed to hosting via source."),I(Re,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),I(Re,"invalid-log-argument","First argument to `onLog` must be null or a function."),I(Re,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),I(Re,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),I(Re,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),I(Re,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Re),Qe=new K("app","Firebase",Ke),Ye=function(){function e(t,n,r){var i=this;x(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new re("app",(function(){return i}),"PUBLIC"))}return S(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}]),e}(),Xe="9.17.1";function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:je,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qe.create("bad-app-name",{appName:String(i)});if(n||(n=F()),!n)throw Qe.create("no-options");var a=Be.get(i);if(a){if(Y(n,a.options)&&Y(r,a.config))return a;throw Qe.create("duplicate-app",{appName:i})}var o,u=new se(i),s=p(qe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ye(n,r,u);return Be.set(i,l),l}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=Be.get(e);if(!t&&e===je)return Je();if(!t)throw Qe.create("no-app",{appName:e});return t}function $e(e,t,n){var r,i=null!==(r=ze[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ve.warn(u.join(" "))}We(new re("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var et="firebase-heartbeat-database",tt=1,nt="firebase-heartbeat-store",rt=null;function it(){return rt||(rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ie(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ie(u.result),e.oldVersion,e.newVersion,Ie(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(et,tt,{upgrade:function(e,t){if(0===t)e.createObjectStore(nt)}}).catch((function(e){throw Qe.create("idb-open",{originalErrorMessage:e.message})}))),rt}function at(e){return ot.apply(this,arguments)}function ot(){return ot=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it();case 3:return n=e.sent,e.abrupt("return",n.transaction(nt).objectStore(nt).get(ct(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof G?Ve.warn(e.t0.message):(r=Qe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ve.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ot.apply(this,arguments)}function ut(e,t){return st.apply(this,arguments)}function st(){return st=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it();case 3:return r=e.sent,i=r.transaction(nt,"readwrite"),a=i.objectStore(nt),e.next=8,a.put(n,ct(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof G?Ve.warn(e.t0.message):(o=Qe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ve.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),st.apply(this,arguments)}function ct(e){return"".concat(e.name,"!").concat(e.options.appId)}var lt=1024,ft=function(){function e(t){var n=this;x(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new vt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return S(e,[{key:"triggerHeartbeat",value:function(){var e=g(y().mark((function e(){var t,n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ht(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ht(),n=dt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=D(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ht(){return(new Date).toISOString().substring(0,10)}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),yt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),yt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pt,vt=function(){function e(t){x(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return S(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,at(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(E(r.heartbeats),E(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}pt="",We(new re("platform-logger",(function(e){return new Me(e)}),"PRIVATE")),We(new re("heartbeat",(function(e){return new ft(e)}),"PRIVATE")),$e(Ue,Fe,pt),$e(Ue,Fe,"esm2017"),$e("fire-js","");var mt,gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},kt={},bt=bt||{},wt=gt||self;function _t(){}function Et(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var At="closure_uid_"+(1e9*Math.random()>>>0),Tt=0;function St(e,t,n){return e.call.apply(e.bind,arguments)}function It(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ct(e,t,n){return(Ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?St:It).apply(null,arguments)}function Nt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rt(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Dt(){this.s=this.s,this.o=this.o}Dt.prototype.s=!1,Dt.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,At)&&e[At]||(e[At]=++Tt))},Dt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ot=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Pt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Lt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Et(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Mt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Ut=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wt.addEventListener("test",_t,t),wt.removeEventListener("test",_t,t)}catch(n){}return e}();function Ft(e){return/^[\s\xa0]*$/.test(e)}var Vt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function jt(e,t){return e<t?-1:e>t?1:0}function zt(){var e=wt.navigator;return e&&(e=e.userAgent)?e:""}function Bt(e){return-1!=zt().indexOf(e)}function qt(e){return qt[" "](e),e}qt[" "]=_t;var Ht,Wt=Bt("Opera"),Gt=Bt("Trident")||Bt("MSIE"),Kt=Bt("Edge"),Qt=Kt||Gt,Yt=Bt("Gecko")&&!(-1!=zt().toLowerCase().indexOf("webkit")&&!Bt("Edge"))&&!(Bt("Trident")||Bt("MSIE"))&&!Bt("Edge"),Xt=-1!=zt().toLowerCase().indexOf("webkit")&&!Bt("Edge");function Jt(){var e=wt.document;return e?e.documentMode:void 0}e:{var Zt="",$t=function(){var e=zt();return Yt?/rv:([^\);]+)(\)|;)/.exec(e):Kt?/Edge\/([\d\.]+)/.exec(e):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Xt?/WebKit\/(\S+)/.exec(e):Wt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if($t&&(Zt=$t?$t[1]:""),Gt){var en=Jt();if(null!=en&&en>parseFloat(Zt)){Ht=String(en);break e}}Ht=Zt}var tn,nn={};function rn(){return function(e){var t=nn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Vt(String(Ht)).split("."),n=Vt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=jt(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||jt(0==a[2].length,0==o[2].length)||jt(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(wt.document&&Gt){var an=Jt();tn=an||(parseInt(Ht,10)||void 0)}else tn=void 0;var on=tn;function un(e,t){if(Mt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Yt){e:{try{qt(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:sn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&un.X.h.call(this)}}Rt(un,Mt);var sn={2:"touch",3:"pen",4:"mouse"};un.prototype.h=function(){un.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),ln=0;function fn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ln,this.ba=this.ea=!1}function hn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function dn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function pn(e){var t={};for(var n in e)t[n]=e[n];return t}var vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<vn.length;a++)n=vn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function mn(e){this.src=e,this.g={},this.h=0}function gn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ot(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(hn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function kn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}mn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=kn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new fn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var bn="closure_lm_"+(1e6*Math.random()|0),wn={};function _n(e,t,n,r,i){if(r&&r.once)return xn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)_n(e,t[a],n,r,i);return null}return n=Rn(n),e&&e[cn]?e.N(t,n,xt(r)?!!r.capture:!!r,i):En(e,t,n,!1,r,i)}function En(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=xt(i)?!!i.capture:!!i,u=Cn(e);if(u||(e[bn]=u=new mn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=In;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ut||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Sn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function xn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)xn(e,t[a],n,r,i);return null}return n=Rn(n),e&&e[cn]?e.O(t,n,xt(r)?!!r.capture:!!r,i):En(e,t,n,!0,r,i)}function An(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)An(e,t[a],n,r,i);else r=xt(r)?!!r.capture:!!r,n=Rn(n),e&&e[cn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=kn(a=e.g[t],n,r,i))&&(hn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Cn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=kn(t,n,r,i)),(n=-1<e?t[e]:null)&&Tn(n))}function Tn(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[cn])gn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Sn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Cn(t))?(gn(n,e),0==n.h&&(n.src=null,t[bn]=null)):hn(e)}}}function Sn(e){return e in wn?wn[e]:wn[e]="on"+e}function In(e,t){if(e.ba)e=!0;else{t=new un(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Tn(e),e=n.call(r,t)}return e}function Cn(e){return(e=e[bn])instanceof mn?e:null}var Nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rn(e){return"function"===typeof e?e:(e[Nn]||(e[Nn]=function(t){return e.handleEvent(t)}),e[Nn])}function Dn(){Dt.call(this),this.i=new mn(this),this.P=this,this.I=null}function On(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Mt(t,e);else if(t instanceof Mt)t.target=t.target||e;else{var i=t;yn(t=new Mt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Pn(o,r,!0,t)&&i}if(i=Pn(o=t.g=e,r,!0,t)&&i,i=Pn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Pn(o=t.g=n[a],r,!1,t)&&i}function Pn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&gn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Rt(Dn,Dt),Dn.prototype[cn]=!0,Dn.prototype.removeEventListener=function(e,t,n,r){An(this,e,t,n,r)},Dn.prototype.M=function(){if(Dn.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hn(n[r]);delete t.g[e],t.h--}}this.I=null},Dn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Dn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ln=wt.JSON.stringify;function Mn(){var e=Hn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Un,Fn=function(){function e(){x(this,e),this.h=this.g=null}return S(e,[{key:"add",value:function(e,t){var n=Vn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Vn=new(function(){function e(t,n){x(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return S(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new jn}),(function(e){return e.reset()})),jn=function(){function e(){x(this,e),this.next=this.g=this.h=null}return S(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function zn(e){wt.setTimeout((function(){throw e}),0)}function Bn(e,t){Un||function(){var e=wt.Promise.resolve(void 0);Un=function(){e.then(Wn)}}(),qn||(Un(),qn=!0),Hn.add(e,t)}var qn=!1,Hn=new Fn;function Wn(){for(var e;e=Mn();){try{e.h.call(e.g)}catch(n){zn(n)}var t=Vn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}qn=!1}function Gn(e,t){Dn.call(this),this.h=e||1,this.g=t||wt,this.j=Ct(this.lb,this),this.l=Date.now()}function Kn(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Qn(e,t,n){if("function"===typeof e)n&&(e=Ct(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ct(e.handleEvent,e)}return 2147483647<Number(t)?-1:wt.setTimeout(e,t||0)}function Yn(e){e.g=Qn((function(){e.g=null,e.i&&(e.i=!1,Yn(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Rt(Gn,Dn),(mt=Gn.prototype).ca=!1,mt.R=null,mt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),On(this,"tick"),this.ca&&(Kn(this),this.start()))}},mt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){Gn.X.M.call(this),Kn(this),delete this.g};var Xn=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return S(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Yn(this)}},{key:"M",value:function(){d(h(n.prototype),"M",this).call(this),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Dt);function Jn(e){Dt.call(this),this.h=e,this.g={}}Rt(Jn,Dt);var Zn=[];function $n(e,t,n,r){Array.isArray(n)||(n&&(Zn[0]=n.toString()),n=Zn);for(var i=0;i<n.length;i++){var a=_n(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function er(e){dn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Tn(e)}),e),e.g={}}function tr(){this.g=!0}function nr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ln(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Jn.prototype.M=function(){Jn.X.M.call(this),er(this)},Jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tr.prototype.Aa=function(){this.g=!1},tr.prototype.info=function(){};var rr={},ir=null;function ar(){return ir=ir||new Dn}function or(e){Mt.call(this,rr.Pa,e)}function ur(e){var t=ar();On(t,new or(t))}function sr(e,t){Mt.call(this,rr.STAT_EVENT,e),this.stat=t}function cr(e){var t=ar();On(t,new sr(t,e))}function lr(e,t){Mt.call(this,rr.Qa,e),this.size=t}function fr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return wt.setTimeout((function(){e()}),t)}rr.Pa="serverreachability",Rt(or,Mt),rr.STAT_EVENT="statevent",Rt(sr,Mt),rr.Qa="timingevent",Rt(lr,Mt);var hr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},dr={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function pr(){}function vr(e){return e.h||(e.h=e.i())}function yr(){}pr.prototype.h=null;var mr,gr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function kr(){Mt.call(this,"d")}function br(){Mt.call(this,"c")}function wr(){}function _r(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Jn(this),this.O=xr,e=Qt?125:void 0,this.T=new Gn(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Er}function Er(){this.i=null,this.g="",this.h=!1}Rt(kr,Mt),Rt(br,Mt),Rt(wr,pr),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},mr=new wr;var xr=45e3,Ar={},Tr={};function Sr(e,t,n){e.K=1,e.v=Gr(zr(t)),e.s=n,e.P=!0,Ir(e,null)}function Ir(e,t){e.F=Date.now(),Dr(e),e.A=zr(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),ai(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Er,e.g=oa(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Xn(Ct(e.La,e,e.g),e.N)),$n(e.S,e.g,"readystatechange",e.ib),t=e.H?pn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ur(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Cr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Nr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Rr(e,n))==Tr){4==t&&(e.o=4,cr(14),i=!1),nr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ar){e.o=4,cr(15),nr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}nr(e.j,e.m,r,null),Ur(e,r)}Cr(e)&&r!=Tr&&r!=Ar&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,cr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zi(t),t.K=!0,cr(11))):(nr(e.j,e.m,n,"[Invalid Chunked Response]"),Mr(e),Lr(e))}function Rr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Tr:(n=Number(t.substring(n,r)),isNaN(n)?Ar:(r+=1)+n>t.length?Tr:(t=t.substr(r,n),e.C=r+n,t))}function Dr(e){e.V=Date.now()+e.O,Or(e,e.O)}function Or(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fr(Ct(e.gb,e),t)}function Pr(e){e.B&&(wt.clearTimeout(e.B),e.B=null)}function Lr(e){0==e.l.G||e.I||ta(e.l,e)}function Mr(e){Pr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Kn(e.T),er(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ur(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||di(n.h,e)))if(!e.J&&di(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ea(n),Hi(n)}Ji(n),cr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=fr(Ct(n.cb,n),6e3));if(1>=hi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else ra(n,11)}else if((e.J||n.g==e)&&ea(n),!Ft(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(pi(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Wr(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=aa(r,r.H?r.ka:null,r.V),d.J){vi(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Pr(p),Dr(p)),r.g=d}else Xi(r);0<n.i.length&&Gi(n)}else"stop"!=a[0]&&"close"!=a[0]||ra(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ra(n,7):qi(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ur()}catch(a){}}function Fr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Et(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Et(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Et(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(mt=_r.prototype).setTimeout=function(e){this.O=e},mt.ib=function(e){e=e.target;var t=this.L;t&&3==Ui(e)?t.l():this.La(e)},mt.La=function(e){try{if(e==this.g)e:{var t=Ui(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Qt||this.g&&(this.h.h||this.g.fa()||Fi(this.g)))){this.I||4!=t||7==n||ur(),Pr(this);var r=this.g.aa();this.Y=r;t:if(Cr(this)){var i=Fi(this.g);e="";var a=i.length,o=4==Ui(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Mr(this),Lr(this);var u="";break t}this.h.i=new wt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ft(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,cr(12),Mr(this),Lr(this);break e}nr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ur(this,r)}this.P?(Nr(this,t,u),Qt&&this.i&&3==t&&($n(this.S,this.T,"tick",this.hb),this.T.start())):(nr(this.j,this.m,u,null),Ur(this,u)),4==t&&Mr(this),this.i&&!this.I&&(4==t?ta(this.l,this):(this.i=!1,Dr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,cr(12)):(this.o=0,cr(13)),Mr(this),Lr(this)}}}catch(t){}},mt.hb=function(){if(this.g){var e=Ui(this.g),t=this.g.fa();this.C<t.length&&(Pr(this),Nr(this,e,t),this.i&&4!=e&&Dr(this))}},mt.cancel=function(){this.I=!0,Mr(this)},mt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ur(),cr(17)),Mr(this),this.o=2,Lr(this)):Or(this,this.V-e)};var Vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jr(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof jr){this.h=void 0!==t?t:e.h,Br(this,e.j),this.s=e.s,this.g=e.g,qr(this,e.m),this.l=e.l,t=e.i;var n=new ti;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Hr(this,n),this.o=e.o}else e&&(n=String(e).match(Vr))?(this.h=!!t,Br(this,n[1]||"",!0),this.s=Kr(n[2]||""),this.g=Kr(n[3]||"",!0),qr(this,n[4]),this.l=Kr(n[5]||"",!0),Hr(this,n[6]||"",!0),this.o=Kr(n[7]||"")):(this.h=!!t,this.i=new ti(null,this.h))}function zr(e){return new jr(e)}function Br(e,t,n){e.j=n?Kr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function qr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Hr(e,t,n){t instanceof ti?(e.i=t,function(e,t){t&&!e.j&&(ni(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ri(this,t),ai(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Qr(t,$r)),e.i=new ti(t,e.h))}function Wr(e,t,n){e.i.set(t,n)}function Gr(e){return Wr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Qr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}jr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Qr(t,Xr,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Qr(t,Xr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Qr(n,"/"==n.charAt(0)?Zr:Jr,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Qr(n,ei)),e.join("")};var Xr=/[#\/\?@]/g,Jr=/[#\?:]/g,Zr=/[#\?]/g,$r=/[#\?@]/g,ei=/#/g;function ti(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ni(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ri(e,t){ni(e),t=oi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ii(e,t){return ni(e),t=oi(e,t),e.g.has(t)}function ai(e,t,n){ri(e,t),0<n.length&&(e.i=null,e.g.set(oi(e,t),Pt(n)),e.h+=n.length)}function oi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(mt=ti.prototype).add=function(e,t){ni(this),this.i=null,e=oi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},mt.forEach=function(e,t){ni(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},mt.oa=function(){ni(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},mt.W=function(e){ni(this);var t=[];if("string"===typeof e)ii(this,e)&&(t=t.concat(this.g.get(oi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},mt.set=function(e,t){return ni(this),this.i=null,ii(this,e=oi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},mt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ui=S((function e(t,n){x(this,e),this.h=t,this.g=n}));function si(e){this.l=e||li,wt.PerformanceNavigationTiming?e=0<(e=wt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(wt.g&&wt.g.Ga&&wt.g.Ga()&&wt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ci,li=10;function fi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function hi(e){return e.h?1:e.g?e.g.size:0}function di(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pi(e,t){e.g?e.g.add(t):e.h=t}function vi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function yi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Pt(e.i)}function mi(){}function gi(){this.g=new mi}function ki(e,t,n){var r=n||"";try{Fr(e,(function(e,n){var i=e;xt(e)&&(i=Ln(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function wi(e){this.l=e.ac||null,this.j=e.jb||!1}function _i(e,t){Dn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ei,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}si.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},mi.prototype.stringify=function(e){return wt.JSON.stringify(e,void 0)},mi.prototype.parse=function(e){return wt.JSON.parse(e,void 0)},Rt(wi,pr),wi.prototype.g=function(){return new _i(this.l,this.j)},wi.prototype.i=(ci={},function(){return ci}),Rt(_i,Dn);var Ei=0;function xi(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Ai(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ti(e)}function Ti(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(mt=_i.prototype).open=function(e,t){if(this.readyState!=Ei)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ti(this)},mt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||wt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ai(this)),this.readyState=Ei},mt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof wt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xi(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},mt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ai(this):Ti(this),3==this.readyState&&xi(this)}},mt.Va=function(e){this.g&&(this.response=this.responseText=e,Ai(this))},mt.Ua=function(e){this.g&&(this.response=e,Ai(this))},mt.ga=function(){this.g&&Ai(this)},mt.setRequestHeader=function(e,t){this.v.append(e,t)},mt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Si=wt.JSON.parse;function Ii(e){Dn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ci,this.K=this.L=!1}Rt(Ii,Dn);var Ci="",Ni=/^https?$/i,Ri=["POST","PUT"];function Di(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Oi(e),Li(e)}function Oi(e){e.D||(e.D=!0,On(e,"complete"),On(e,"error"))}function Pi(e){if(e.h&&"undefined"!=typeof bt&&(!e.C[1]||4!=Ui(e)||2!=e.aa()))if(e.v&&4==Ui(e))Qn(e.Ha,0,e);else if(On(e,"readystatechange"),4==Ui(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Vr)[1]||null;if(!a&&wt.self&&wt.self.location){var o=wt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ni.test(a?a.toLowerCase():"")}t=i}if(t)On(e,"complete"),On(e,"success");else{e.m=6;try{var u=2<Ui(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Oi(e)}}finally{Li(e)}}}function Li(e,t){if(e.g){Mi(e);var n=e.g,r=e.C[0]?_t:null;e.g=null,e.C=null,t||On(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mi(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(wt.clearTimeout(e.A),e.A=null)}function Ui(e){return e.g?e.g.readyState:0}function Fi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ci:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(_a){return null}}function Vi(e){var t="";return dn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ji(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Wr(e,t,n))}function zi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bi(e){this.Ca=0,this.i=[],this.j=new tr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=zi("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=zi("baseRetryDelayMs",5e3,e),this.bb=zi("retryDelaySeedMs",1e4,e),this.$a=zi("forwardChannelMaxRetries",2,e),this.ta=zi("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new si(e&&e.concurrentRequestLimit),this.Fa=new gi,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function qi(e){if(Wi(e),3==e.G){var t=e.U++,n=zr(e.F);Wr(n,"SID",e.I),Wr(n,"RID",t),Wr(n,"TYPE","terminate"),Qi(e,n),(t=new _r(e,e.j,t,void 0)).K=2,t.v=Gr(zr(n)),n=!1,wt.navigator&&wt.navigator.sendBeacon&&(n=wt.navigator.sendBeacon(t.v.toString(),"")),!n&&wt.Image&&((new Image).src=t.v,n=!0),n||(t.g=oa(t.l,null),t.g.da(t.v)),t.F=Date.now(),Dr(t)}ia(e)}function Hi(e){e.g&&(Zi(e),e.g.cancel(),e.g=null)}function Wi(e){Hi(e),e.u&&(wt.clearTimeout(e.u),e.u=null),ea(e),e.h.cancel(),e.m&&("number"===typeof e.m&&wt.clearTimeout(e.m),e.m=null)}function Gi(e){fi(e.h)||e.m||(e.m=!0,Bn(e.Ja,e),e.C=0)}function Ki(e,t){var n;n=t?t.m:e.U++;var r=zr(e.F);Wr(r,"SID",e.I),Wr(r,"RID",n),Wr(r,"AID",e.T),Qi(e,r),e.o&&e.s&&ji(r,e.o,e.s),n=new _r(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Yi(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),pi(e.h,n),Sr(n,r,t)}function Qi(e,t){e.ia&&dn(e.ia,(function(e,n){Wr(t,n,e)})),e.l&&Fr({},(function(e,n){Wr(t,n,e)}))}function Yi(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ct(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ki(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Xi(e){e.g||e.u||(e.Z=1,Bn(e.Ia,e),e.A=0)}function Ji(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=fr(Ct(e.Ia,e),na(e,e.A)),e.A++,!0)}function Zi(e){null!=e.B&&(wt.clearTimeout(e.B),e.B=null)}function $i(e){e.g=new _r(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=zr(e.sa);Wr(t,"RID","rpc"),Wr(t,"SID",e.I),Wr(t,"CI",e.L?"0":"1"),Wr(t,"AID",e.T),Wr(t,"TYPE","xmlhttp"),Qi(e,t),e.o&&e.s&&ji(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Gr(zr(t)),n.s=null,n.P=!0,Ir(n,e)}function ea(e){null!=e.v&&(wt.clearTimeout(e.v),e.v=null)}function ta(e,t){var n=null;if(e.g==t){ea(e),Zi(e),e.g=null;var r=2}else{if(!di(e.h,t))return;n=t.D,vi(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;On(r=ar(),new lr(r,n)),Gi(e)}else Xi(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(hi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=fr(Ct(e.Ja,e,t),na(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ji(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ra(e,5);break;case 4:ra(e,10);break;case 3:ra(e,6);break;default:ra(e,2)}}function na(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function ra(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ct(e.kb,e);n||(n=new jr("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||Br(n,"https"),Gr(n)),function(e,t){var n=new tr;if(wt.Image){var r=new Image;r.onload=Nt(bi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Nt(bi,n,r,"TestLoadImage: error",!1,t),r.onabort=Nt(bi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Nt(bi,n,r,"TestLoadImage: timeout",!1,t),wt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else cr(2);e.G=0,e.l&&e.l.va(t),ia(e),Wi(e)}function ia(e){if(e.G=0,e.la=[],e.l){var t=yi(e.h);0==t.length&&0==e.i.length||(Lt(e.la,t),Lt(e.la,e.i),e.h.i.length=0,Pt(e.i),e.i.length=0),e.l.ua()}}function aa(e,t,n){var r=n instanceof jr?zr(n):new jr(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),qr(r,r.m);else{var i=wt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new jr(null,void 0);r&&Br(a,r),t&&(a.g=t),i&&qr(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Wr(r,n,t),Wr(r,"VER",e.ma),Qi(e,r),r}function oa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ii(new wi({jb:!0})):new Ii(e.ra)).Ka(e.H),t}function ua(){}function sa(){if(Gt&&!(10<=Number(on)))throw Error("Environmental error: no available transport.")}function ca(e,t){Dn.call(this),this.g=new Bi(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Ft(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ft(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ha(this)}function la(e){kr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fa(){br.call(this),this.status=1}function ha(e){this.g=e}(mt=Ii.prototype).Ka=function(e){this.L=e},mt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mr.g(),this.C=this.u?vr(this.u):vr(mr),this.g.onreadystatechange=Ct(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Di(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=p(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=wt.FormData&&e instanceof wt.FormData,!(0<=Ot(Ri,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=p(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mi(this),0<this.B&&((this.K=function(e){return Gt&&rn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.qa,this)):this.A=Qn(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Di(this,u)}},mt.qa=function(){"undefined"!=typeof bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,On(this,"timeout"),this.abort(8))},mt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,On(this,"complete"),On(this,"abort"),Li(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Li(this,!0)),Ii.X.M.call(this)},mt.Ha=function(){this.s||(this.F||this.v||this.l?Pi(this):this.fb())},mt.fb=function(){Pi(this)},mt.aa=function(){try{return 2<Ui(this)?this.g.status:-1}catch(ci){return-1}},mt.fa=function(){try{return this.g?this.g.responseText:""}catch(ci){return""}},mt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Si(t)}},mt.Ea=function(){return this.m},mt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(mt=Bi.prototype).ma=8,mt.G=1,mt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new _r(this,this.j,e,void 0),n=this.s;if(this.S&&(n?yn(n=pn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Yi(this,t,r),Wr(i=zr(this.F),"RID",e),Wr(i,"CVER",22),this.D&&Wr(i,"X-HTTP-Session-Id",this.D),Qi(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Vi(n)))+"&"+r:this.o&&ji(i,this.o,n)),pi(this.h,t),this.Ya&&Wr(i,"TYPE","init"),this.O?(Wr(i,"$req",r),Wr(i,"SID","null"),t.Z=!0,Sr(t,i,null)):Sr(t,i,r),this.G=2}}else 3==this.G&&(e?Ki(this,e):0==this.i.length||fi(this.h)||Ki(this))},mt.Ia=function(){if(this.u=null,$i(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=fr(Ct(this.eb,this),e)}},mt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,cr(10),Hi(this),$i(this))},mt.cb=function(){null!=this.v&&(this.v=null,Hi(this),Ji(this),cr(19))},mt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))},(mt=ua.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Ra=function(){},sa.prototype.g=function(e,t){return new ca(e,t)},Rt(ca,Dn),ca.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;cr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=aa(e,null,e.V),Gi(e)},ca.prototype.close=function(){qi(this.g)},ca.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ln(e),e=n);t.i.push(new ui(t.ab++,e)),3==t.G&&Gi(t)},ca.prototype.M=function(){this.g.l=null,delete this.j,qi(this.g),delete this.g,ca.X.M.call(this)},Rt(la,kr),Rt(fa,br),Rt(ha,ua),ha.prototype.xa=function(){On(this.g,"a")},ha.prototype.wa=function(e){On(this.g,new la(e))},ha.prototype.va=function(e){On(this.g,new fa)},ha.prototype.ua=function(){On(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,ca.prototype.send=ca.prototype.u,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,dr.COMPLETE="complete",yr.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Dn.prototype.listen=Dn.prototype.N,Ii.prototype.listenOnce=Ii.prototype.O,Ii.prototype.getLastError=Ii.prototype.Oa,Ii.prototype.getLastErrorCode=Ii.prototype.Ea,Ii.prototype.getStatus=Ii.prototype.aa,Ii.prototype.getResponseJson=Ii.prototype.Sa,Ii.prototype.getResponseText=Ii.prototype.fa,Ii.prototype.send=Ii.prototype.da,Ii.prototype.setWithCredentials=Ii.prototype.Ka;var da=kt.createWebChannelTransport=function(){return new sa},pa=kt.getStatEventTarget=function(){return ar()},va=kt.ErrorCode=hr,ya=kt.EventType=dr,ma=kt.Event=rr,ga=kt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ka=kt.FetchXmlHttpFactory=wi,ba=kt.WebChannel=yr,wa=kt.XhrIo=Ii,_a="@firebase/firestore",Ea=function(){function e(t){x(this,e),this.uid=t}return S(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ea.UNAUTHENTICATED=new Ea(null),Ea.GOOGLE_CREDENTIALS=new Ea("google-credentials-uid"),Ea.FIRST_PARTY=new Ea("first-party-uid"),Ea.MOCK_USER=new Ea("mock-user");var xa="9.17.1",Aa=new pe("@firebase/firestore");function Ta(){return Aa.logLevel}function Sa(e){if(Aa.logLevel<=ue.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Na);Aa.debug.apply(Aa,["Firestore (".concat(xa,"): ").concat(e)].concat(E(i)))}}function Ia(e){if(Aa.logLevel<=ue.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Na);Aa.error.apply(Aa,["Firestore (".concat(xa,"): ").concat(e)].concat(E(i)))}}function Ca(e){if(Aa.logLevel<=ue.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Na);Aa.warn.apply(Aa,["Firestore (".concat(xa,"): ").concat(e)].concat(E(i)))}}function Na(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(xa,") INTERNAL ASSERTION FAILED: ")+e;throw Ia(t),new Error(t)}function Da(e,t){e||Ra()}function Oa(e,t){return e}var Pa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},La=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return S(n)}(G),Ma=S((function e(){var t=this;x(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ua=S((function e(t,n){x(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Fa=function(){function e(){x(this,e)}return S(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ea.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Va=function(){function e(t){x(this,e),this.token=t,this.changeListener=null}return S(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ja=function(){function e(t){x(this,e),this.t=t,this.currentUser=Ea.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return S(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ma;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ma,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Sa("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Sa("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ma)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Sa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Da("string"==typeof n.accessToken),new Ua(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Da(null===e||"string"==typeof e),new Ea(e)}}]),e}(),za=function(){function e(t,n,r,i){x(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ea.FIRST_PARTY,this.p=new Map}return S(e,[{key:"I",value:function(){return this.g?this.g():(Da(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Ba=function(){function e(t,n,r,i){x(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return S(e,[{key:"getToken",value:function(){return Promise.resolve(new za(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ea.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),qa=S((function e(t){x(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ha=function(){function e(t){x(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return S(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Sa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Sa("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Sa("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Sa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Da("string"==typeof t.token),e.A=t.token,new qa(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Wa(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ga=function(){function e(){x(this,e)}return S(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Wa(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ka(e,t){return e<t?-1:e>t?1:0}function Qa(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Ya=function(){function e(t,n){if(x(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new La(Pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new La(Pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new La(Pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new La(Pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return S(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ka(this.nanoseconds,e.nanoseconds):Ka(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Xa=function(){function e(t){x(this,e),this.timestamp=t}return S(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ya(0,0))}},{key:"max",value:function(){return new e(new Ya(253402300799,999999999))}}]),e}(),Ja=function(){function e(t,n,r){x(this,e),void 0===n?n=0:n>t.length&&Ra(),void 0===r?r=t.length-n:r>t.length-n&&Ra(),this.segments=t,this.offset=n,this.len=r}return S(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Za=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new La(Pa.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,E(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ja),$a=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eo=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return $a.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new La(Pa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new La(Pa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new La(Pa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new La(Pa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ja),to=function(){function e(t){x(this,e),this.path=t}return S(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Za.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Za.fromString(t))}},{key:"fromName",value:function(t){return new e(Za.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Za.emptyPath())}},{key:"comparator",value:function(e,t){return Za.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Za(t.slice()))}}]),e}(),no=S((function e(t,n,r,i){x(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));no.UNKNOWN_ID=-1;function ro(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Xa.fromTimestamp(1e9===r?new Ya(n+1,0):new Ya(n,r));return new ao(i,to.empty(),t)}function io(e){return new ao(e.readTime,e.key,-1)}var ao=function(){function e(t,n,r){x(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return S(e,null,[{key:"min",value:function(){return new e(Xa.min(),to.empty(),-1)}},{key:"max",value:function(){return new e(Xa.max(),to.empty(),-1)}}]),e}();function oo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=to.comparator(e.documentKey,t.documentKey))?n:Ka(e.largestBatchId,t.largestBatchId)}var uo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",so=function(){function e(){x(this,e),this.onCommittedListeners=[]}return S(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function co(e){return lo.apply(this,arguments)}function lo(){return lo=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Pa.FAILED_PRECONDITION&&t.message===uo){e.next=2;break}throw t;case 2:Sa("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}var fo=function(){function e(t){var n=this;x(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return S(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ra(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function ho(e){return"IndexedDbTransactionError"===e.name}var po=function(){function e(t,n){var r=this;x(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return S(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();po.at=-1;var vo=S((function e(t,n,r,i,a,o,u,s){x(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),yo=function(){function e(t,n){x(this,e),this.projectId=t,this.database=n||"(default)"}return S(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function mo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function go(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ko(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function bo(e){return null==e}function wo(e){return 0===e&&1/e==-1/0}function _o(e){return"number"==typeof e&&Number.isInteger(e)&&!wo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Eo=function(e){function t(e){x(this,t),this.binaryString=e}return S(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ka(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Eo.EMPTY_BYTE_STRING=new Eo("");var xo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(e){if(Da(!!e),"string"==typeof e){var t=0,n=xo.exec(e);if(Da(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:To(e.seconds),nanos:To(e.nanos)}}function To(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function So(e){return"string"==typeof e?Eo.fromBase64String(e):Eo.fromUint8Array(e)}function Io(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Co(e){var t=e.mapValue.fields.__previous_value__;return Io(t)?Co(t):t}function No(e){var t=Ao(e.mapValue.fields.__local_write_time__.timestampValue);return new Ya(t.seconds,t.nanos)}var Ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Do(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Io(e)?4:Go(e)?9007199254740991:10:Ra()}function Oo(e,t){if(e===t)return!0;var n=Do(e);if(n!==Do(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return No(e).isEqual(No(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ao(e.timestampValue),r=Ao(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return So(e.bytesValue).isEqual(So(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return To(e.geoPointValue.latitude)===To(t.geoPointValue.latitude)&&To(e.geoPointValue.longitude)===To(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return To(e.integerValue)===To(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=To(e.doubleValue),r=To(t.doubleValue);return n===r?wo(n)===wo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qa(e.arrayValue.values||[],t.arrayValue.values||[],Oo);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(mo(n)!==mo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Oo(n[i],r[i])))return!1;return!0}(e,t);default:return Ra()}}function Po(e,t){return void 0!==(e.values||[]).find((function(e){return Oo(e,t)}))}function Lo(e,t){if(e===t)return 0;var n=Do(e),r=Do(t);if(n!==r)return Ka(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ka(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=To(e.integerValue||e.doubleValue),r=To(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mo(e.timestampValue,t.timestampValue);case 4:return Mo(No(e),No(t));case 5:return Ka(e.stringValue,t.stringValue);case 6:return function(e,t){var n=So(e),r=So(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ka(n[i],r[i]);if(0!==a)return a}return Ka(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ka(To(e.latitude),To(t.latitude));return 0!==n?n:Ka(To(e.longitude),To(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Lo(n[i],r[i]);if(a)return a}return Ka(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ro.mapValue&&t===Ro.mapValue)return 0;if(e===Ro.mapValue)return 1;if(t===Ro.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ka(r[o],a[o]);if(0!==u)return u;var s=Lo(n[r[o]],i[a[o]]);if(0!==s)return s}return Ka(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ra()}}function Mo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ka(e,t);var n=Ao(e),r=Ao(t),i=Ka(n.seconds,r.seconds);return 0!==i?i:Ka(n.nanos,r.nanos)}function Uo(e){return Fo(e)}function Fo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ao(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?So(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,to.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Fo(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=p(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Fo(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ra();var t,n}function Vo(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function jo(e){return!!e&&"integerValue"in e}function zo(e){return!!e&&"arrayValue"in e}function Bo(e){return!!e&&"nullValue"in e}function qo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ho(e){return!!e&&"mapValue"in e}function Wo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return go(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Wo(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Wo(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Go(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Ko=S((function e(t,n){x(this,e),this.position=t,this.inclusive=n}));function Qo(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?to.comparator(to.fromName(o.referenceValue),n.key):Lo(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Yo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Oo(e.position[n],t.position[n]))return!1;return!0}var Xo=S((function e(){x(this,e)})),Jo=function(e){k(n,e);var t=w(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Lo(t,this.value)):null!==t&&Do(this.value)===Do(t)&&this.matchesComparison(Lo(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ra()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new au(e,t,r):"array-contains"===t?new cu(e,r):"in"===t?new lu(e,r):"not-in"===t?new fu(e,r):"array-contains-any"===t?new hu(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ou(e,n):new uu(e,n)}}]),n}(Xo),Zo=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return S(n,[{key:"matches",value:function(e){return $o(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=p(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Xo);function $o(e){return"and"===e.op}function eu(e){return tu(e)&&$o(e)}function tu(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Zo)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function nu(e){if(e instanceof Jo)return e.field.canonicalString()+e.op.toString()+Uo(e.value);if(eu(e))return e.filters.map((function(e){return nu(e)})).join(",");var t=e.filters.map((function(e){return nu(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function ru(e,t){return e instanceof Jo?function(e,t){return t instanceof Jo&&e.op===t.op&&e.field.isEqual(t.field)&&Oo(e.value,t.value)}(e,t):e instanceof Zo?function(e,t){return t instanceof Zo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&ru(n,t.filters[r])}),!0)}(e,t):void Ra()}function iu(e){return e instanceof Jo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Uo(e.value))}(e):e instanceof Zo?function(e){return e.op.toString()+" {"+e.getFilters().map(iu).join(" ,")+"}"}(e):"Filter"}var au=function(e){k(n,e);var t=w(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r,i)).key=to.fromName(i.referenceValue),a}return S(n,[{key:"matches",value:function(e){var t=to.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Jo),ou=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,"in",r)).keys=su("in",r),i}return S(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Jo),uu=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e,"not-in",r)).keys=su("not-in",r),i}return S(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Jo);function su(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return to.fromName(e.referenceValue)}))}var cu=function(e){k(n,e);var t=w(n);function n(e,r){return x(this,n),t.call(this,e,"array-contains",r)}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return zo(t)&&Po(t.arrayValue,this.value)}}]),n}(Jo),lu=function(e){k(n,e);var t=w(n);function n(e,r){return x(this,n),t.call(this,e,"in",r)}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Po(this.value.arrayValue,t)}}]),n}(Jo),fu=function(e){k(n,e);var t=w(n);function n(e,r){return x(this,n),t.call(this,e,"not-in",r)}return S(n,[{key:"matches",value:function(e){if(Po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Po(this.value.arrayValue,t)}}]),n}(Jo),hu=function(e){k(n,e);var t=w(n);function n(e,r){return x(this,n),t.call(this,e,"array-contains-any",r)}return S(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!zo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Po(t.value.arrayValue,e)}))}}]),n}(Jo),du=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";x(this,e),this.field=t,this.dir=n}));function pu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vu=function(){function e(t,n){x(this,e),this.comparator=t,this.root=n||mu.EMPTY}return S(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new yu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new yu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new yu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new yu(this.root,e,this.comparator,!0)}}]),e}(),yu=function(){function e(t,n,r,i){x(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return S(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),mu=function(){function e(t,n,r,i,a){x(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return S(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ra();if(this.right.isRed())throw Ra();var e=this.left.check();if(e!==this.right.check())throw Ra();return e+(this.isRed()?0:1)}}]),e}();mu.EMPTY=null,mu.RED=!0,mu.BLACK=!1,mu.EMPTY=new(function(){function e(){x(this,e),this.size=0}return S(e,[{key:"key",get:function(){throw Ra()}},{key:"value",get:function(){throw Ra()}},{key:"color",get:function(){throw Ra()}},{key:"left",get:function(){throw Ra()}},{key:"right",get:function(){throw Ra()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var gu=function(){function e(t){x(this,e),this.comparator=t,this.data=new vu(this.comparator)}return S(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ku(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ku(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ku=function(){function e(t){x(this,e),this.iter=t}return S(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var bu=function(){function e(t){x(this,e),this.fields=t,t.sort(eo.comparator)}return S(e,[{key:"unionWith",value:function(t){var n,r=new gu(eo.comparator),i=p(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=p(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Qa(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),wu=function(){function e(t){x(this,e),this.value=t}return S(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ho(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(t)}},{key:"setAll",value:function(e){var t=this,n=eo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Wo(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ho(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Oo(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ho(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){go(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Wo(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function _u(e){var t=[];return go(e.fields,(function(e,n){var r=new eo([e]);if(Ho(n)){var i=_u(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new bu(t)}var Eu=function(){function e(t,n,r,i,a,o,u){x(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return S(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Xa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Xa.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Xa.min(),Xa.min(),Xa.min(),wu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Xa.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Xa.min(),Xa.min(),wu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Xa.min(),Xa.min(),wu.empty(),2)}}]),e}(),xu=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;x(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Au(e){return new xu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Tu(e){var t=Oa(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return nu(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),bo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Uo(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Uo(e)})).join(",")),t.ft=n}return t.ft}function Su(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!pu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!ru(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yo(e.startAt,t.startAt)&&Yo(e.endAt,t.endAt)}function Iu(e){return to.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Cu=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;x(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function Nu(e,t,n,r,i,a,o,u){return new Cu(e,t,n,r,i,a,o,u)}function Ru(e){return new Cu(e)}function Du(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ou(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Pu(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Lu(e){return null!==e.collectionGroup}function Mu(e){var t=Oa(e);if(null===t.dt){t.dt=[];var n=Pu(t),r=Ou(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new du(n)),t.dt.push(new du(eo.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new du(eo.keyField(),s))}}}return t.dt}function Uu(e){var t=Oa(e);if(!t._t)if("F"===t.limitType)t._t=Au(t.path,t.collectionGroup,Mu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(Mu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new du(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ko(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ko(t.startAt.position,t.startAt.inclusive):null;t._t=Au(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Fu(e,t){t.getFirstInequalityField(),Pu(e);var n=e.filters.concat([t]);return new Cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vu(e,t,n){return new Cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ju(e,t){return Su(Uu(e),Uu(t))&&e.limitType===t.limitType}function zu(e){return"".concat(Tu(Uu(e)),"|lt:").concat(e.limitType)}function Bu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return iu(e)})).join(", "),"]")),bo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Uo(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Uo(e)})).join(",")),"Target(".concat(t,")")}(Uu(e)),"; limitType=").concat(e.limitType,")")}function qu(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):to.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(Mu(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Qo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mu(e),t))&&!(e.endAt&&!function(e,t,n){var r=Qo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mu(e),t))}(e,t)}function Hu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Wu(e){return function(t,n){var r,i=!1,a=p(Mu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Gu(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Gu(e,t,n){var r=e.field.isKeyField()?to.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Lo(r,i):Ra()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ra()}}function Ku(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wo(t)?"-0":t}}function Qu(e){return{integerValue:""+e}}function Yu(e,t){return _o(t)?Qu(t):Ku(e,t)}var Xu=S((function e(){x(this,e),this._=void 0}));function Ju(e,t,n){return e instanceof es?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ts?ns(e,t):e instanceof rs?is(e,t):function(e,t){var n=$u(e,t),r=os(n)+os(e.gt);return jo(n)&&jo(e.gt)?Qu(r):Ku(e.yt,r)}(e,t)}function Zu(e,t,n){return e instanceof ts?ns(e,t):e instanceof rs?is(e,t):n}function $u(e,t){return e instanceof as?jo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var es=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n)}(Xu),ts=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this)).elements=e,r}return S(n)}(Xu);function ns(e,t){var n,r=us(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Oo(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var rs=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this)).elements=e,r}return S(n)}(Xu);function is(e,t){var n,r=us(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Oo(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var as=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return S(n)}(Xu);function os(e){return To(e.integerValue||e.doubleValue)}function us(e){return zo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ss=S((function e(t,n){x(this,e),this.field=t,this.transform=n}));var cs=S((function e(t,n){x(this,e),this.version=t,this.transformResults=n})),ls=function(){function e(t,n){x(this,e),this.updateTime=t,this.exists=n}return S(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function fs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var hs=S((function e(){x(this,e)}));function ds(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new As(e.key,ls.none()):new gs(e.key,e.data,ls.none());var n,r=e.data,i=wu.empty(),a=new gu(eo.comparator),o=p(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new ks(e.key,i,new bu(a.toArray()),ls.none())}function ps(e,t,n){e instanceof gs?function(e,t,n){var r=e.value.clone(),i=ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ks?function(e,t,n){if(fs(e.precondition,t)){var r=ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vs(e,t,n,r){return e instanceof gs?function(e,t,n,r){if(!fs(e.precondition,t))return n;var i=e.value.clone(),a=_s(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ks?function(e,t,n,r){if(!fs(e.precondition,t))return n;var i=_s(e.fieldTransforms,r,t),a=t.data;return a.setAll(bs(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return fs(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ys(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=$u(a.transform,o||null);null!=u&&(null===r&&(r=wu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ms(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qa(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ts&&t instanceof ts||e instanceof rs&&t instanceof rs?Qa(e.elements,t.elements,Oo):e instanceof as&&t instanceof as?Oo(e.gt,t.gt):e instanceof es&&t instanceof es}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var gs=function(e){k(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return x(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hs),ks=function(e){k(n,e);var t=w(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return x(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return S(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(hs);function bs(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ws(e,t,n){var r=new Map;Da(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Zu(o,u,n[i]))}return r}function _s(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ju(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Es,xs,As=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hs),Ts=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hs),Ss=S((function e(t){x(this,e),this.count=t}));function Is(e){switch(e){default:return Ra();case Pa.CANCELLED:case Pa.UNKNOWN:case Pa.DEADLINE_EXCEEDED:case Pa.RESOURCE_EXHAUSTED:case Pa.INTERNAL:case Pa.UNAVAILABLE:case Pa.UNAUTHENTICATED:return!1;case Pa.INVALID_ARGUMENT:case Pa.NOT_FOUND:case Pa.ALREADY_EXISTS:case Pa.PERMISSION_DENIED:case Pa.FAILED_PRECONDITION:case Pa.ABORTED:case Pa.OUT_OF_RANGE:case Pa.UNIMPLEMENTED:case Pa.DATA_LOSS:return!0}}function Cs(e){if(void 0===e)return Ia("GRPC error has no .code"),Pa.UNKNOWN;switch(e){case Es.OK:return Pa.OK;case Es.CANCELLED:return Pa.CANCELLED;case Es.UNKNOWN:return Pa.UNKNOWN;case Es.DEADLINE_EXCEEDED:return Pa.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return Pa.RESOURCE_EXHAUSTED;case Es.INTERNAL:return Pa.INTERNAL;case Es.UNAVAILABLE:return Pa.UNAVAILABLE;case Es.UNAUTHENTICATED:return Pa.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return Pa.INVALID_ARGUMENT;case Es.NOT_FOUND:return Pa.NOT_FOUND;case Es.ALREADY_EXISTS:return Pa.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return Pa.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return Pa.FAILED_PRECONDITION;case Es.ABORTED:return Pa.ABORTED;case Es.OUT_OF_RANGE:return Pa.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return Pa.UNIMPLEMENTED;case Es.DATA_LOSS:return Pa.DATA_LOSS;default:return Ra()}}(xs=Es||(Es={}))[xs.OK=0]="OK",xs[xs.CANCELLED=1]="CANCELLED",xs[xs.UNKNOWN=2]="UNKNOWN",xs[xs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xs[xs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xs[xs.NOT_FOUND=5]="NOT_FOUND",xs[xs.ALREADY_EXISTS=6]="ALREADY_EXISTS",xs[xs.PERMISSION_DENIED=7]="PERMISSION_DENIED",xs[xs.UNAUTHENTICATED=16]="UNAUTHENTICATED",xs[xs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xs[xs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xs[xs.ABORTED=10]="ABORTED",xs[xs.OUT_OF_RANGE=11]="OUT_OF_RANGE",xs[xs.UNIMPLEMENTED=12]="UNIMPLEMENTED",xs[xs.INTERNAL=13]="INTERNAL",xs[xs.UNAVAILABLE=14]="UNAVAILABLE",xs[xs.DATA_LOSS=15]="DATA_LOSS";var Ns=function(){function e(t,n){x(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return S(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){go(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ko(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Rs=new vu(to.comparator);function Ds(){return Rs}var Os=new vu(to.comparator);function Ps(){for(var e=Os,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ls(e){var t=Os;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ms(){return Fs()}function Us(){return Fs()}function Fs(){return new Ns((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vs=new vu(to.comparator),js=new gu(to.comparator);function zs(){for(var e=js,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Bs=new gu(Ka);function qs(){return Bs}var Hs=function(){function e(t,n,r,i,a){x(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return S(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ws.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Xa.min(),i,qs(),Ds(),zs())}}]),e}(),Ws=function(){function e(t,n,r,i,a){x(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return S(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,zs(),zs(),zs())}}]),e}(),Gs=S((function e(t,n,r,i){x(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Ks=S((function e(t,n){x(this,e),this.targetId=t,this.Et=n})),Qs=S((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;x(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ys=function(){function e(){x(this,e),this.At=0,this.Rt=Zs(),this.bt=Eo.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return S(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=zs(),t=zs(),n=zs();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ra()}})),new Ws(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Zs()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),Xs=function(){function e(t){x(this,e),this.$t=t,this.Bt=new Map,this.Lt=Ds(),this.qt=Js(),this.Ut=new gu(Ka)}return S(e,[{key:"Kt",value:function(e){var t,n=p(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Ra()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Iu(i))if(0===n){var a=new to(i.path);this.Qt(t,a,Eu.newNoDocument(a,Xa.min()))}else Da(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Iu(a.target)){var o=new to(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Eu.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=zs();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Hs(e,n,this.Ut,this.Lt,r);return this.Lt=Ds(),this.qt=Js(),this.Ut=new gu(Ka),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new Ys,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new gu(Ka),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Sa("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Ys),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Js(){return new vu(to.comparator)}function Zs(){return new vu(to.comparator)}var $s={asc:"ASCENDING",desc:"DESCENDING"},ec={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tc={and:"AND",or:"OR"},nc=S((function e(t,n){x(this,e),this.databaseId=t,this.wt=n}));function rc(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ic(e,t){return e.wt?t.toBase64():t.toUint8Array()}function ac(e,t){return rc(e,t.toTimestamp())}function oc(e){return Da(!!e),Xa.fromTimestamp(function(e){var t=Ao(e);return new Ya(t.seconds,t.nanos)}(e))}function uc(e,t){return function(e){return new Za(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sc(e){var t=Za.fromString(e);return Da(Ic(t)),t}function cc(e,t){return uc(e.databaseId,t.path)}function lc(e,t){var n=sc(t);if(n.get(1)!==e.databaseId.projectId)throw new La(Pa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new La(Pa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new to(pc(n))}function fc(e,t){return uc(e.databaseId,t)}function hc(e){var t=sc(e);return 4===t.length?Za.emptyPath():pc(t)}function dc(e){return new Za(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pc(e){return Da(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vc(e,t,n){return{name:cc(e,t),fields:n.value.mapValue.fields}}function yc(e,t){var n;if(t instanceof gs)n={update:vc(e,t.key,t.value)};else if(t instanceof As)n={delete:cc(e,t.key)};else if(t instanceof ks)n={update:vc(e,t.key,t.data),updateMask:Sc(t.fieldMask)};else{if(!(t instanceof Ts))return Ra();n={verify:cc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof es)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ts)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof as)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ra()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ac(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ra()}(e,t.precondition)),n}function mc(e,t){return{documents:[fc(e,t.path)]}}function gc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=fc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Tc(Zo.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:xc(e.field),direction:wc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||bo(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function kc(e){var t=hc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Da(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=bc(e);return t instanceof Zo&&eu(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new du(Ac(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return bo(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ko(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ko(n,t)}(n.endAt)),Nu(t,i,u,o,s,"F",c,l)}function bc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ac(e.unaryFilter.field);return Jo.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ac(e.unaryFilter.field);return Jo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ac(e.unaryFilter.field);return Jo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ac(e.unaryFilter.field);return Jo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ra()}}(e):void 0!==e.fieldFilter?function(e){return Jo.create(Ac(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ra()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zo.create(e.compositeFilter.filters.map((function(e){return bc(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ra()}}(e.compositeFilter.op))}(e):Ra()}function wc(e){return $s[e]}function _c(e){return ec[e]}function Ec(e){return tc[e]}function xc(e){return{fieldPath:e.canonicalString()}}function Ac(e){return eo.fromServerFormat(e.fieldPath)}function Tc(e){return e instanceof Jo?function(e){if("=="===e.op){if(qo(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NAN"}};if(Bo(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qo(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NOT_NAN"}};if(Bo(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(e.field),op:_c(e.op),value:e.value}}}(e):e instanceof Zo?function(e){var t=e.getFilters().map((function(e){return Tc(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Ec(e.op),filters:t}}}(e):Ra()}function Sc(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ic(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Cc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Nc=([].concat(E(Cc),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Rc=Nc;[].concat(Rc,["indexConfiguration","indexState","indexEntries"]);var Dc=function(){function e(t,n,r,i){x(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return S(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ps(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=p(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=vs(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=p(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=vs(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Us();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ds(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Xa.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),zs())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(function(e,t){return ms(e,t)}))&&Qa(this.baseMutations,e.baseMutations,(function(e,t){return ms(e,t)}))}}]),e}(),Oc=function(){function e(t,n,r,i){x(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return S(e,null,[{key:"from",value:function(t,n,r){Da(t.mutations.length===r.length);for(var i=Vs,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Pc=function(){function e(t,n){x(this,e),this.largestBatchId=t,this.mutation=n}return S(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Lc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xa.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xa.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Eo.EMPTY_BYTE_STRING;x(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return S(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Mc=S((function e(t){x(this,e),this.ie=t}));function Uc(e){var t=kc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vu(t,t.limit,"L"):t}var Fc=function(){function e(){x(this,e)}return S(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(To(e.integerValue));else if("doubleValue"in e){var n=To(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),wo(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(So(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?Go(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Ra()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),to.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();Fc.Ie=new Fc;var Vc=function(){function e(){x(this,e),this.Je=new jc}return S(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),fo.resolve()}},{key:"getCollectionParents",value:function(e,t){return fo.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return fo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return fo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return fo.resolve(null)}},{key:"getIndexType",value:function(e,t){return fo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return fo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return fo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return fo.resolve(ao.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return fo.resolve(ao.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return fo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return fo.resolve()}}]),e}(),jc=function(){function e(){x(this,e),this.index={}}return S(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gu(Za.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new gu(Za.comparator)).toArray()}}]),e}();new Uint8Array(0);var zc=function(){function e(t,n,r){x(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return S(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();zc.DEFAULT_COLLECTION_PERCENTILE=10,zc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zc.DEFAULT=new zc(41943040,zc.DEFAULT_COLLECTION_PERCENTILE,zc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zc.DISABLED=new zc(-1,0,0);var Bc=function(){function e(t){x(this,e),this.bn=t}return S(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var qc=function(){function e(){x(this,e),this.changes=new Ns((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return S(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Eu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?fo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Hc=S((function e(t,n){x(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Wc=function(){function e(t,n,r,i){x(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return S(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&vs(r.mutation,e,bu.empty(),Ya.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,zs()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zs(),i=Ms();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ps();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ms();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,zs())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ds(),a=Fs(),o=Fs();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ks)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),vs(o.mutation,t,o.mutation.getFieldMask(),Ya.now())):a.set(t.key,bu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Hc(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Fs(),i=new vu((function(e,t){return e-t})),a=zs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=p(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||bu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||zs()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Us();c.forEach((function(e){if(!a.has(e)){var n=ds(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return fo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return to.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):fo.resolve(Ms()),u=-1,s=a;return o.next((function(t){return fo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?fo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,zs())})).next((function(e){return{batchId:u,changes:Ls(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new to(t)).next((function(e){var t=Ps();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ps();return this.indexManager.getCollectionParents(e,i).next((function(o){return fo.forEach(o,(function(o){var u=function(e,t){return new Cu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Eu.newInvalidDocument(r)))}));var n=Ps();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&vs(a.mutation,i,bu.empty(),Ya.now()),qu(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Gc=function(){function e(t){x(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return S(e,[{key:"getBundleMetadata",value:function(e,t){return fo.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:oc(n.createTime)}),fo.resolve()}},{key:"getNamedQuery",value:function(e,t){return fo.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Uc(e.bundledQuery),readTime:oc(e.readTime)}}(t)),fo.resolve()}}]),e}(),Kc=function(){function e(){x(this,e),this.overlays=new vu(to.comparator),this.es=new Map}return S(e,[{key:"getOverlay",value:function(e,t){return fo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ms();return fo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),fo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),fo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ms(),i=t.length+1,a=new to(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return fo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new vu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ms(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ms(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return fo.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Pc(t,n));var a=this.es.get(t);void 0===a&&(a=zs(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Qc=function(){function e(){x(this,e),this.ns=new gu(Yc.ss),this.rs=new gu(Yc.os)}return S(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Yc(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new Yc(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new to(new Za([])),r=new Yc(n,e),i=new Yc(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new to(new Za([])),n=new Yc(t,e),r=new Yc(t,e+1),i=zs();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Yc(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Yc=function(){function e(t,n){x(this,e),this.key=t,this._s=n}return S(e,null,[{key:"ss",value:function(e,t){return to.comparator(e.key,t.key)||Ka(e._s,t._s)}},{key:"os",value:function(e,t){return Ka(e._s,t._s)||to.comparator(e.key,t.key)}}]),e}(),Xc=function(){function e(t,n){x(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new gu(Yc.ss)}return S(e,[{key:"checkEmpty",value:function(e){return fo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Dc(i,t,n,r);this.mutationQueue.push(a);var o,u=p(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Yc(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return fo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return fo.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return fo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return fo.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return fo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Yc(t,0),i=new Yc(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),fo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gu(Ka);return t.forEach((function(e){var t=new Yc(e,0),i=new Yc(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),fo.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;to.isDocumentKey(i)||(i=i.child(""));var a=new Yc(new to(i),0),o=new gu(Ka);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),fo.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Da(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return fo.forEach(t.mutations,(function(i){var a=new Yc(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Yc(t,0),r=this.gs.firstAfterOrEqual(n);return fo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,fo.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Jc=function(){function e(t){x(this,e),this.Es=t,this.docs=new vu(to.comparator),this.size=0}return S(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return fo.resolve(n?n.document.mutableCopy():Eu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ds();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Eu.newInvalidDocument(e))})),fo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ds(),a=t.path,o=new to(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||oo(io(l),n)<=0||(r.has(l.key)||qu(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return fo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ra()}},{key:"As",value:function(e,t){return fo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Zc(this)}},{key:"getSize",value:function(e){return fo.resolve(this.size)}}]),e}(),Zc=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this)).Yn=e,r}return S(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),fo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(qc),$c=function(){function e(t){x(this,e),this.persistence=t,this.Rs=new Ns((function(e){return Tu(e)}),Su),this.lastRemoteSnapshotVersion=Xa.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Qc,this.targetCount=0,this.vs=Bc.Pn()}return S(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),fo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return fo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return fo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),fo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),fo.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Bc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,fo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),fo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,fo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),fo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return fo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return fo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),fo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),fo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),fo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return fo.resolve(n)}},{key:"containsKey",value:function(e,t){return fo.resolve(this.Ps.containsKey(t))}}]),e}(),el=function(){function e(t,n){var r=this;x(this,e),this.Vs={},this.overlays={},this.Ss=new po(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new $c(this),this.indexManager=new Vc,this.remoteDocumentCache=new Jc((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Mc(n),this.Ns=new Gc(this.yt)}return S(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Kc,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Xc(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Sa("MemoryPersistence","Starting transaction:",e);var i=new tl(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return fo.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),tl=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return S(n)}(so),nl=function(){function e(t){x(this,e),this.persistence=t,this.Fs=new Qc,this.$s=null}return S(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Ra()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),fo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),fo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),fo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fo.forEach(this.Ls,(function(r){var i=to.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,Xa.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return fo.or([function(){return fo.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var rl=function(){function e(t,n,r,i){x(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return S(e,null,[{key:"Ci",value:function(t,n){var r,i=zs(),a=zs(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),il=function(){function e(){x(this,e),this.xi=!1}return S(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Du(t))return fo.resolve(null);var r=Uu(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Vu(t,null,"F"),r=Uu(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=zs.apply(void 0,E(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Vu(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Du(t)||r.isEqual(Xa.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Ta()<=ue.DEBUG&&Sa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bu(t)),i.Bi(e,o,t,ro(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new gu(Wu(e));return t.forEach((function(t,r){qu(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Ta()<=ue.DEBUG&&Sa("QueryEngine","Using full collection scan to execute query:",Bu(t)),this.Ni.getDocumentsMatchingQuery(e,t,ao.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),al=function(){function e(t,n,r,i){x(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new vu(Ka),this.Ui=new Ns((function(e){return Tu(e)}),Su),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return S(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wc(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function ol(e,t,n,r){return new al(e,t,n,r)}function ul(e,t){return sl.apply(this,arguments)}function sl(){return sl=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=zs(),s=p(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=p(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var y=d.value;o.push(y.batchId);var m,g=p(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function cl(e,t){var n=Oa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=fo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Da(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=zs(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ll(e){var t=Oa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function fl(e,t){var n=Oa(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Eo.EMPTY_BYTE_STRING,Xa.min()).withLastLimboFreeSnapshotVersion(Xa.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Ds(),s=zs();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hl(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Xa.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return fo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function hl(e,t,n){var r=zs(),i=zs();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ds();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Xa.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Sa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function dl(e,t){var n=Oa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function pl(e,t){var n=Oa(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,fo.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Lc(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function vl(e,t,n){return yl.apply(this,arguments)}function yl(){return yl=g(y().mark((function e(t,n,r){var i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Oa(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ho(e.t1)){e.next=12;break}throw e.t1;case 12:Sa("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),yl.apply(this,arguments)}function ml(e,t,n){var r=Oa(e),i=Xa.min(),a=zs();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Oa(e),i=r.Ui.get(n);return void 0!==i?fo.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,Uu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Xa.min(),n?a:zs())})).next((function(e){return gl(r,Hu(t),e),{documents:e,Hi:a}}))}))}function gl(e,t,n){var r=e.Ki.get(t)||Xa.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var kl=function(){function e(){x(this,e),this.activeTargetIds=qs()}return S(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),bl=function(){function e(){x(this,e),this.Lr=new kl,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return S(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new kl,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),wl=function(){function e(){x(this,e)}return S(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),_l=function(){function e(){var t=this;x(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return S(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Sa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Sa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),El={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xl=function(){function e(t){x(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return S(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Al=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return S(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new wa;o.setWithCredentials(!0),o.listenOnce(ya.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case va.NO_ERROR:var t=o.getResponseJson();Sa("Connection","XHR received:",JSON.stringify(t)),i(t);break;case va.TIMEOUT:Sa("Connection",'RPC "'+e+'" timed out'),a(new La(Pa.DEADLINE_EXCEEDED,"Request time out"));break;case va.HTTP_ERROR:var n=o.getStatus();if(Sa("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pa).indexOf(t)>=0?t:Pa.UNKNOWN}(u.status);a(new La(s,u.message))}else a(new La(Pa.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new La(Pa.UNAVAILABLE,"Connection failed."));break;default:Ra()}}finally{Sa("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=da(),a=pa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ka({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Sa("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new xl({Hr:function(e){l?Sa("Connection","Not sending because WebChannel is closed:",e):(c||(Sa("Connection","Opening WebChannel transport."),s.open(),c=!0),Sa("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,ba.EventType.OPEN,(function(){l||Sa("Connection","WebChannel transport opened.")})),h(s,ba.EventType.CLOSE,(function(){l||(l=!0,Sa("Connection","WebChannel transport closed"),f.io())})),h(s,ba.EventType.ERROR,(function(e){l||(l=!0,Ca("Connection","WebChannel transport errored:",e),f.io(new La(Pa.UNAVAILABLE,"The operation could not be completed")))})),h(s,ba.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Da(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Sa("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Es[e];if(void 0!==t)return Cs(t)}(a),u=i.message;void 0===o&&(o=Pa.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new La(o,u)),s.close()}else Sa("Connection","WebChannel received:",n),f.ro(n)}})),h(a,ma.STAT_EVENT,(function(e){e.stat===ga.PROXY?Sa("Connection","Detected buffering proxy"):e.stat===ga.NOPROXY&&Sa("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){x(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return S(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Sa("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Sa("RestConnection","Received: ",e),e}),(function(t){throw Ca("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=El[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Tl(){return"undefined"!=typeof document?document:null}function Sl(e){return new nc(e,!0)}var Il=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;x(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return S(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Sa("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Cl=function(){function e(t,n,r,i,a,o,u,s){x(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Il(t,n)}return S(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Pa.RESOURCE_EXHAUSTED?(Ia(n.toString()),Ia("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Pa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new La(Pa.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Sa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Sa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Nl=function(e){k(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return x(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return S(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ra()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Da(void 0===t||"string"==typeof t),Eo.fromBase64String(t||"")):(Da(void 0===t||t instanceof Uint8Array),Eo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Pa.UNKNOWN:Cs(e.code);return new La(t,e.message||"")}(o);n=new Qs(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=lc(e,s.document.name),l=oc(s.document.updateTime),f=s.document.createTime?oc(s.document.createTime):Xa.min(),h=new wu({mapValue:{fields:s.document.fields}}),d=Eu.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Gs(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=lc(e,y.document),g=y.readTime?oc(y.readTime):Xa.min(),k=Eu.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Gs([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=lc(e,w.document),E=w.removedTargetIds||[];n=new Gs([],E,_,null)}else{if(!("filter"in t))return Ra();t.filter;var x=t.filter;x.targetId;var A=x.count||0,T=new Ss(A),S=x.targetId;n=new Ks(S,T)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Xa.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Xa.min():t.readTime?oc(t.readTime):Xa.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=dc(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Iu(r)?{documents:mc(e,r)}:{query:gc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ic(e,t.resumeToken):t.snapshotVersion.compareTo(Xa.min())>0&&(n.readTime=rc(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ra()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=dc(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(Cl),Rl=function(e){k(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return x(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return S(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,d(h(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Da(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Da(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?oc(e.updateTime):oc(t);return n.isEqual(Xa.min())&&(n=oc(t)),new cs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=oc(e.commitTime);return this.listener.Zo(n,t)}return Da(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=dc(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return yc(t.yt,e)}))};this.Bo(n)}}]),n}(Cl),Dl=function(e){k(n,e);var t=w(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return S(n,[{key:"su",value:function(){if(this.nu)throw new La(Pa.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pa.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new La(Pa.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection._o(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pa.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new La(Pa.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return S((function e(){x(this,e)}))}());var Ol=function(){function e(t,n){x(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return S(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Ia(t),this.ou=!1):Sa("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Pl=S((function e(t,n,r,i,a){var o=this;x(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Wl(o),!e.t0){e.next=5;break}return Sa("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Oa(t))._u.add(4),e.next=4,Ul(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Ll(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Ol(r,i)}));function Ll(e){return Ml.apply(this,arguments)}function Ml(){return Ml=g(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Wl(t)){e.next=18;break}n=p(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ml.apply(this,arguments)}function Ul(e){return Fl.apply(this,arguments)}function Fl(){return Fl=g(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Fl.apply(this,arguments)}function Vl(e,t){var n=Oa(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Hl(n)?ql(n):wf(n).ko()&&zl(n,t))}function jl(e,t){var n=Oa(e),r=wf(n);n.du.delete(t),r.ko()&&Bl(n,t),0===n.du.size&&(r.ko()?r.Fo():Wl(n)&&n.gu.set("Unknown"))}function zl(e,t){e.yu.Ot(t.targetId),wf(e).zo(t)}function Bl(e,t){e.yu.Ot(t),wf(e).Ho(t)}function ql(e){e.yu=new Xs({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),wf(e).start(),e.gu.uu()}function Hl(e){return Wl(e)&&!wf(e).No()&&e.du.size>0}function Wl(e){return 0===Oa(e)._u.size}function Gl(e){e.yu=void 0}function Kl(e){return Ql.apply(this,arguments)}function Ql(){return Ql=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){zl(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ql.apply(this,arguments)}function Yl(e,t){return Xl.apply(this,arguments)}function Xl(){return Xl=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gl(t),Hl(t)?(t.gu.hu(n),ql(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Xl.apply(this,arguments)}function Jl(e,t,n){return Zl.apply(this,arguments)}function Zl(){return Zl=g(y().mark((function e(t,n,r){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Qs&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Sa("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$l(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gs?t.yu.Kt(n):n instanceof Ks?t.yu.Jt(n):t.yu.jt(n),r.isEqual(Xa.min())){e.next=29;break}return e.prev=14,e.next=17,ll(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Eo.EMPTY_BYTE_STRING,n.snapshotVersion)),Bl(e,t);var r=new Lc(n.target,t,1,n.sequenceNumber);zl(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Sa("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$l(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Zl.apply(this,arguments)}function $l(e,t,n){return ef.apply(this,arguments)}function ef(){return ef=g(y().mark((function e(t,n,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ho(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Ul(t);case 5:t.gu.set("Offline"),r||(r=function(){return ll(t.localStore)}),t.asyncQueue.enqueueRetryable(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sa("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Ll(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ef.apply(this,arguments)}function tf(e,t){return t().catch((function(n){return $l(e,n,t)}))}function nf(e){return rf.apply(this,arguments)}function rf(){return rf=g(y().mark((function e(t){var n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Oa(t),r=_f(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!af(n)){e.next=19;break}return e.prev=3,e.next=6,dl(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,of(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$l(n,e.t0);case 17:e.next=2;break;case 19:uf(n)&&sf(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),rf.apply(this,arguments)}function af(e){return Wl(e)&&e.fu.length<10}function of(e,t){e.fu.push(t);var n=_f(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function uf(e){return Wl(e)&&!_f(e).No()&&e.fu.length>0}function sf(e){_f(e).start()}function cf(e){return lf.apply(this,arguments)}function lf(){return lf=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_f(t).eu();case 1:case"end":return e.stop()}}),e)}))),lf.apply(this,arguments)}function ff(e){return hf.apply(this,arguments)}function hf(){return hf=g(y().mark((function e(t){var n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_f(t),r=p(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),hf.apply(this,arguments)}function df(e,t,n){return pf.apply(this,arguments)}function pf(){return pf=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Oc.from(i,n,r),e.next=3,tf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,nf(t);case 5:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(e,t){return yf.apply(this,arguments)}function yf(){return yf=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&_f(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Is(i=n.code)||i===Pa.ABORTED){e.next=7;break}return r=t.fu.shift(),_f(t).Mo(),e.next=5,tf(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,nf(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:uf(t)&&sf(t);case 5:case"end":return e.stop()}}),e)}))),yf.apply(this,arguments)}function mf(e,t){return gf.apply(this,arguments)}function gf(){return gf=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Oa(t)).asyncQueue.verifyOperationInProgress(),Sa("RemoteStore","RemoteStore received new credentials"),i=Wl(r),r._u.add(3),e.next=6,Ul(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Ll(r);case 12:case"end":return e.stop()}}),e)}))),gf.apply(this,arguments)}function kf(e,t){return bf.apply(this,arguments)}function bf(){return bf=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oa(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Ll(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Ul(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function wf(e){return e.pu||(e.pu=function(e,t,n){var r=Oa(e);return r.su(),new Nl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Kl.bind(null,e),Zr:Yl.bind(null,e),Wo:Jl.bind(null,e)}),e.wu.push(function(){var t=g(y().mark((function t(n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Hl(e)?ql(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Gl(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function _f(e){return e.Iu||(e.Iu=function(e,t,n){var r=Oa(e);return r.su(),new Rl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:cf.bind(null,e),Zr:vf.bind(null,e),tu:ff.bind(null,e),Zo:df.bind(null,e)}),e.wu.push(function(){var t=g(y().mark((function t(n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,nf(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Sa("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Ef=function(){function e(t,n,r,i,a){x(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return S(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new La(Pa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function xf(e,t){if(Ia("AsyncQueue","".concat(t,": ").concat(e)),ho(e))return new La(Pa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Af=function(){function e(t){x(this,e),this.comparator=t?function(e,n){return t(e,n)||to.comparator(e.key,n.key)}:function(e,t){return to.comparator(e.key,t.key)},this.keyedMap=Ps(),this.sortedSet=new vu(this.comparator)}return S(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Tf=function(){function e(){x(this,e),this.Tu=new vu(to.comparator)}return S(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ra():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Sf=function(){function e(t,n,r,i,a,o,u,s,c){x(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return S(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Af.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),If=S((function e(){x(this,e),this.Au=void 0,this.listeners=[]})),Cf=S((function e(){x(this,e),this.queries=new Ns((function(e){return zu(e)}),ju),this.onlineState="Unknown",this.Ru=new Set}));function Nf(e,t){return Rf.apply(this,arguments)}function Rf(){return Rf=g(y().mark((function e(t,n){var r,i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oa(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new If),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=xf(e.t0,"Initialization of query '".concat(Bu(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Mf(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Rf.apply(this,arguments)}function Df(e,t){return Of.apply(this,arguments)}function Of(){return Of=g(y().mark((function e(t,n){var r,i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oa(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}function Pf(e,t){var n,r=Oa(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=p(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&Mf(r)}function Lf(e,t,n){var r=Oa(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Mf(e){e.Ru.forEach((function(e){e.next()}))}var Uf=function(){function e(t,n,r){x(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return S(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Sf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var Ff=S((function e(t){x(this,e),this.key=t})),Vf=S((function e(t){x(this,e),this.key=t})),jf=function(){function e(t,n){x(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zs(),this.mutatedKeys=zs(),this.Gu=Wu(t),this.Qu=new Af(this.Gu)}return S(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new Tf,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=qu(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ra()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new Sf(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tf,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=zs(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Vf(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Ff(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=zs();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Sf.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),zf=S((function e(t,n,r){x(this,e),this.query=t,this.targetId=n,this.view=r})),Bf=S((function e(t){x(this,e),this.key=t,this.nc=!1})),qf=function(){function e(t,n,r,i,a,o){x(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Ns((function(e){return zu(e)}),ju),this.rc=new Map,this.oc=new Set,this.uc=new vu(to.comparator),this.cc=new Map,this.ac=new Qc,this.hc={},this.lc=new Map,this.fc=Bc.vn(),this.onlineState="Unknown",this.dc=void 0}return S(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Hf(e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=g(y().mark((function e(t,n){var r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kh(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,pl(r.localStore,Uu(n));case 8:return u=e.sent,r.isPrimaryClient&&Vl(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Gf(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Gf(e,t,n,r,i){return Kf.apply(this,arguments)}function Kf(){return Kf=g(y().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=g(y().mark((function e(t,n,r,i){var a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,ml(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(fh(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ml(t.localStore,n,!0);case 3:return o=e.sent,u=new jf(n,o.Hi),s=u.Wu(o.documents),c=Ws.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),fh(t,r,l.Xu),f=new zf(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Kf.apply(this,arguments)}function Qf(e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oa(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!ju(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,vl(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),jl(r.remoteStore,i.targetId),ch(r,i.targetId)})).catch(co);case 9:e.next=14;break;case 11:return ch(r,i.targetId),e.next=14,vl(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Yf.apply(this,arguments)}function Xf(e,t,n){return Jf.apply(this,arguments)}function Jf(){return Jf=g(y().mark((function e(t,n,r){var i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bh(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Oa(e),a=Ya.now(),o=t.reduce((function(e,t){return e.add(t.key)}),zs());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ds(),s=zs();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=p(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ys(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new ks(c.key,l,_u(l.value.mapValue),ls.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ls(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new vu(Ka)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ph(i,a.changes);case 9:return e.next=11,nf(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=xf(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Jf.apply(this,arguments)}function Zf(e,t){return $f.apply(this,arguments)}function $f(){return $f=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t),e.prev=1,e.next=4,fl(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Da(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Da(n.nc):e.removedDocuments.size>0&&(Da(n.nc),n.nc=!1))})),e.next=8,ph(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,co(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$f.apply(this,arguments)}function eh(e,t,n){var r=Oa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Oa(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Mf(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function th(e,t,n){return nh.apply(this,arguments)}function nh(){return nh=g(y().mark((function e(t,n,r){var i,a,o,u,s,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Oa(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new vu(to.comparator)).insert(o,Eu.newNoDocument(o,Xa.min())),s=zs().add(o),c=new Hs(Xa.min(),new Map,new gu(Ka),u,s),e.next=9,Zf(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),dh(i),e.next=16;break;case 14:return e.next=16,vl(i.localStore,n,!1).then((function(){return ch(i,n,r)})).catch(co);case 16:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(e,t){return ih.apply(this,arguments)}function ih(){return ih=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t),i=n.batch.batchId,e.prev=1,e.next=4,cl(r.localStore,n);case 4:return a=e.sent,sh(r,i,null),uh(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ph(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,co(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ih.apply(this,arguments)}function ah(e,t,n){return oh.apply(this,arguments)}function oh(){return oh=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oa(t),e.prev=1,e.next=4,function(e,t){var n=Oa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Da(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,sh(i,n,r),uh(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ph(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,co(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),oh.apply(this,arguments)}function uh(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function sh(e,t,n){var r=Oa(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function ch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||lh(e,t)}))}function lh(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(jl(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),dh(e))}function fh(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ff?(e.ac.addReference(a.key,t),hh(e,a)):a instanceof Vf?(Sa("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||lh(e,a.key)):Ra()}}catch(o){i.e(o)}finally{i.f()}}function hh(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Sa("SyncEngine","New document in limbo: "+n),e.oc.add(r),dh(e))}function dh(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new to(Za.fromString(t)),r=e.fc.next();e.cc.set(r,new Bf(n)),e.uc=e.uc.insert(n,r),Vl(e.remoteStore,new Lc(Uu(Ru(n.path)),r,2,po.at))}}function ph(e,t,n){return vh.apply(this,arguments)}function vh(){return vh=g(y().mark((function e(t,n,r){var i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Oa(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=rl.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=g(y().mark((function e(t,n){var r,i,a,o,u,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oa(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return fo.forEach(n,(function(t){return fo.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return fo.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ho(e.t0)){e.next=10;break}throw e.t0;case 10:Sa("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),vh.apply(this,arguments)}function yh(e,t){return mh.apply(this,arguments)}function mh(){return mh=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Oa(t)).currentUser.isEqual(n)){e.next=11;break}return Sa("SyncEngine","User change. New user:",n.toKey()),e.next=5,ul(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new La(Pa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ph(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(e,t){var n=Oa(e),r=n.cc.get(t);if(r&&r.nc)return zs().add(r.key);var i=zs(),a=n.rc.get(t);if(!a)return i;var o,u=p(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function kh(e){var t=Oa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=th.bind(null,t),t.sc.Wo=Pf.bind(null,t.eventManager),t.sc.wc=Lf.bind(null,t.eventManager),t}function bh(e){var t=Oa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ah.bind(null,t),t}var wh=function(){function e(){x(this,e),this.synchronizeTabs=!1}return S(e,[{key:"initialize",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Sl(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return ol(this.persistence,new il,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new el(nl.Bs,this.yt)}},{key:"gc",value:function(e){return new bl}},{key:"terminate",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_h=function(){function e(){x(this,e)}return S(e,[{key:"initialize",value:function(){var e=g(y().mark((function e(t,n){var r=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return eh(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yh.bind(null,this.syncEngine),e.next=12,kf(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Cf}},{key:"createDatastore",value:function(e){var t,n=Sl(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Al(t));return function(e,t,n,r){return new Dl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return eh(o.syncEngine,e,0)},a=_l.C()?new _l:new wl,new Pl(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new qf(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oa(t),Sa("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Ul(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Eh(e,t,n){if(!n)throw new La(Pa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function xh(e){if(!to.isDocumentKey(e))throw new La(Pa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ah(e){if(to.isDocumentKey(e))throw new La(Pa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Th(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ra()}function Sh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new La(Pa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Th(e);throw new La(Pa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Ih=new Map,Ch=function(){function e(t){var n;if(x(this,e),void 0===t.host){if(void 0!==t.ssl)throw new La(Pa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new La(Pa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new La(Pa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return S(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Nh=function(){function e(t,n,r,i){x(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ch({}),this._settingsFrozen=!1}return S(e,[{key:"app",get:function(){if(!this._app)throw new La(Pa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new La(Pa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ch(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fa;switch(e.type){case"gapi":var t=e.client;return new Ba(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new La(Pa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ih.get(e);t&&(Sa("ComponentProvider","Removing Datastore"),Ih.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Rh(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Sh(e,Nh))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ca("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ea.MOCK_USER;else{o=z(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new La(Pa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ea(s)}e._authCredentials=new Va(new Ua(o,u))}}var Dh=function(){function e(t,n,r){x(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return S(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ph(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Oh=function(){function e(t,n,r){x(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return S(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ph=function(e){k(n,e);var t=w(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this,e,r,Ru(i)))._path=i,a.type="collection",a}return S(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Dh(this.firestore,null,new to(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Oh);function Lh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ne(e),Eh("collection","path",t),e instanceof Nh){var a=Za.fromString.apply(Za,[t].concat(r));return Ah(a),new Ph(e,null,a)}if(!(e instanceof Dh||e instanceof Ph))throw new La(Pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Za.fromString.apply(Za,[t].concat(r)));return Ah(o),new Ph(e.firestore,null,o)}function Mh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ne(e),1===arguments.length&&(t=Ga.R()),Eh("doc","path",t),e instanceof Nh){var a=Za.fromString.apply(Za,[t].concat(r));return xh(a),new Dh(e,null,new to(a))}if(!(e instanceof Dh||e instanceof Ph))throw new La(Pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Za.fromString.apply(Za,[t].concat(r)));return xh(o),new Dh(e.firestore,e instanceof Ph?e.converter:null,new to(o))}var Uh=function(){function e(t){x(this,e),this.observer=t,this.muted=!1}return S(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Ia("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Fh=function(){function e(t,n,r,i){var a=this;x(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ea.UNAUTHENTICATED,this.clientId=Ga.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sa("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Sa("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return S(e,[{key:"getConfiguration",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new La(Pa.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(y().mark((function n(){var r;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=xf(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Vh(e,t){return jh.apply(this,arguments)}function jh(){return jh=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Sa("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ul(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),jh.apply(this,arguments)}function zh(e,t){return Bh.apply(this,arguments)}function Bh(){return Bh=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,qh(t);case 3:return r=e.sent,Sa("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return mf(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return mf(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}function qh(e){return Hh.apply(this,arguments)}function Hh(){return Hh=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Sa("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Vh(t,new wh);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Hh.apply(this,arguments)}function Wh(e){return Gh.apply(this,arguments)}function Gh(){return Gh=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Sa("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,zh(t,new _h);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}function Kh(e){return Wh(e).then((function(e){return e.syncEngine}))}function Qh(e){return Yh.apply(this,arguments)}function Yh(){return Yh=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wh(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Hf.bind(null,n.syncEngine),r.onUnlisten=Qf.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Yh.apply(this,arguments)}function Xh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ma;return e.asyncQueue.enqueueAndForget(g(y().mark((function i(){return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Uh({next:function(a){t.enqueueAndForget((function(){return Df(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new La(Pa.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new La(Pa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Uf(Ru(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Nf(e,o)},i.next=3,Qh(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Jh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ma;return e.asyncQueue.enqueueAndForget(g(y().mark((function i(){return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Uh({next:function(n){t.enqueueAndForget((function(){return Df(e,o)})),n.fromCache&&"server"===r.source?i.reject(new La(Pa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Uf(n,a,{includeMetadataChanges:!0,Nu:!0});return Nf(e,o)},i.next=3,Qh(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Zh=function(){function e(){var t=this;x(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Il(this,"async_queue_retry"),this.Wc=function(){var e=Tl();e&&Sa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Tl();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return S(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Tl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new Ma;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=g(y().mark((function e(){var t=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ho(e.t0)){e.next=12;break}throw e.t0;case 12:Sa("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ia("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Ef.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Ra()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=p(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function $h(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=p(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ed=function(e){k(n,e);var t=w(n);function n(e,r,i,a){var o;return x(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Zh,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return S(n,[{key:"_terminate",value:function(){return this._firestoreClient||nd(this),this._firestoreClient.terminate()}}]),n}(Nh);function td(e){return e._firestoreClient||nd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nd(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new vo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Fh(e._authCredentials,e._appCheckCredentials,e._queue,r)}var rd=function(){function e(t){x(this,e),this._byteString=t}return S(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Eo.fromBase64String(t))}catch(t){throw new La(Pa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Eo.fromUint8Array(t))}}]),e}(),id=function(){function e(){x(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new La(Pa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eo(n)}return S(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ad=S((function e(t){x(this,e),this._methodName=t})),od=function(){function e(t,n){if(x(this,e),!isFinite(t)||t<-90||t>90)throw new La(Pa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new La(Pa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return S(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ka(this._lat,e._lat)||Ka(this._long,e._long)}}]),e}(),ud=/^__.*__$/,sd=function(){function e(t,n,r){x(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return S(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new gs(e,this.data,t,this.fieldTransforms)}}]),e}(),cd=function(){function e(t,n,r){x(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return S(e,[{key:"toMutation",value:function(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ld(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ra()}}var fd=function(){function e(t,n,r,i,a,o){x(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return S(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return Cd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ld(this.sa)&&ud.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),hd=function(){function e(t,n,r){x(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Sl(t)}return S(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fd({sa:e,methodName:t,fa:n,path:eo.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function dd(e){var t=e._freezeSettings(),n=Sl(e._databaseId);return new hd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pd(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Ad("Data must be an object, but it was:",o,r);var u,s,c=Ed(r,o);if(a.merge)u=new bu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=p(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Td(t,l.value,n);if(!o.contains(d))throw new La(Pa.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Nd(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new bu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new sd(new wu(c),u,s)}var vd=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ad);function yd(e,t,n){return new fd({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var md=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"_toFieldTransform",value:function(e){return new ss(e.path,new es)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ad),gd=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this,e))._a=r,i}return S(n,[{key:"_toFieldTransform",value:function(e){var t=yd(this,e,!0),n=this._a.map((function(e){return _d(e,t)})),r=new ts(n);return new ss(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ad);function kd(e,t,n,r){var i=e.da(1,t,n);Ad("Data must be an object, but it was:",i,r);var a=[],o=wu.empty();go(r,(function(e,r){var u=Id(t,e,n);r=ne(r);var s=i.ca(u);if(r instanceof vd)a.push(u);else{var c=_d(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new bu(a);return new cd(o,u,i.fieldTransforms)}function bd(e,t,n,r,i,a){var o=e.da(1,t,n),u=[Td(t,r,n)],s=[i];if(a.length%2!=0)throw new La(Pa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Td(t,a[c])),s.push(a[c+1]);for(var l=[],f=wu.empty(),h=u.length-1;h>=0;--h)if(!Nd(l,u[h])){var d=u[h],p=s[h];p=ne(p);var v=o.ca(d);if(p instanceof vd)l.push(d);else{var y=_d(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new bu(l);return new cd(f,m,o.fieldTransforms)}function wd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _d(n,e.da(r?4:3,t))}function _d(e,t){if(xd(e=ne(e)))return Ad("Unsupported field value:",t,e),Ed(e,t);if(e instanceof ad)return function(e,t){if(!ld(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=_d(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ne(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yu(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ya.fromDate(e);return{timestampValue:rc(t.yt,n)}}if(e instanceof Ya){var r=new Ya(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rc(t.yt,r)}}if(e instanceof od)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rd)return{bytesValue:ic(t.yt,e._byteString)};if(e instanceof Dh){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:uc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Th(e)))}(e,t)}function Ed(e,t){var n={};return ko(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):go(e,(function(e,r){var i=_d(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ya||e instanceof od||e instanceof rd||e instanceof Dh||e instanceof ad)}function Ad(e,t,n){if(!xd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Th(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Td(e,t,n){if((t=ne(t))instanceof id)return t._internalPath;if("string"==typeof t)return Id(e,t);throw Cd("Field path arguments must be of type string or ",e,!1,void 0,n)}var Sd=new RegExp("[~\\*/\\[\\]]");function Id(e,t,n){if(t.search(Sd)>=0)throw Cd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return f(id,E(t.split(".")))._internalPath}catch(r){throw Cd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cd(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new La(Pa.INVALID_ARGUMENT,u+e+s)}function Nd(e,t){return e.some((function(e){return e.isEqual(t)}))}var Rd=function(){function e(t,n,r,i,a){x(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return S(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Dh(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Dd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Od("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Dd=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"data",value:function(){return d(h(n.prototype),"data",this).call(this)}}]),n}(Rd);function Od(e,t){return"string"==typeof t?Id(e,t):t instanceof id?t._internalPath:t._delegate._internalPath}function Pd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new La(Pa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ld=S((function e(){x(this,e)})),Md=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n)}(Ld);function Ud(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Ld&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof jd})).length,n=e.filter((function(e){return e instanceof Fd})).length;if(t>1||t>0&&n>0)throw new La(Pa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=p(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Fd=function(e){k(n,e);var t=w(n);function n(e,r,i){var a;return x(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return S(n,[{key:"_apply",value:function(e){var t=this._parse(e);return qd(e._query,t),new Oh(e.firestore,e.converter,Fu(e._query,t))}},{key:"_parse",value:function(e){var t=dd(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new La(Pa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Bd(o,a);var s,c=[],l=p(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(zd(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=zd(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Bd(o,a),u=wd(n,"where",o,"in"===a||"not-in"===a);return Jo.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Md);function Vd(e,t,n){var r=t,i=Od("where",e);return Fd._create(i,r,n)}var jd=function(e){k(n,e);var t=w(n);function n(e,r){var i;return x(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return S(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Zo.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=p(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;qd(r,a),r=Fu(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Oh(e.firestore,e.converter,Fu(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ld);function zd(e,t,n){if("string"==typeof(n=ne(n))){if(""===n)throw new La(Pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lu(t)&&-1!==n.indexOf("/"))throw new La(Pa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Za.fromString(n));if(!to.isDocumentKey(r))throw new La(Pa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vo(e,new to(r))}if(n instanceof Dh)return Vo(e,n._key);throw new La(Pa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Th(n),"."))}function Bd(e,t){if(!Array.isArray(e)||0===e.length)throw new La(Pa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new La(Pa.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function qd(e,t){if(t.isInequality()){var n=Pu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new La(Pa.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Ou(e);null!==i&&Hd(e,r,i)}var a=function(e,t){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var i,a=p(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new La(Pa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new La(Pa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Hd(e,t,n){if(!n.isEqual(t))throw new La(Pa.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wd=function(){function e(){x(this,e)}return S(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return To(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ra()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return go(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new od(To(e.latitude),To(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Co(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(No(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ao(e);return new Ya(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Za.fromString(e);Da(Ic(n));var r=new yo(n.get(1),n.get(3)),i=new to(n.popFirst(5));return r.isEqual(t)||Ia("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Gd(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Kd=function(){function e(t,n){x(this,e),this.hasPendingWrites=t,this.fromCache=n}return S(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Qd=function(e){k(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return x(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return S(n,[{key:"exists",value:function(){return d(h(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Od("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Rd),Yd=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(h(n.prototype),"data",this).call(this,e)}}]),n}(Qd),Xd=function(){function e(t,n,r,i){x(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kd(i.hasPendingWrites,i.fromCache),this.query=r}return S(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Yd(n._firestore,n._userDataWriter,r.key,r,new Kd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new La(Pa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Yd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Yd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Jd(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Jd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ra()}}function Zd(e){e=Sh(e,Dh);var t=Sh(e.firestore,ed);return Xh(td(t),e._key).then((function(n){return ap(t,e,n)}))}var $d=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this)).firestore=e,r}return S(n,[{key:"convertBytes",value:function(e){return new rd(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dh(this.firestore,null,t)}}]),n}(Wd);function ep(e){e=Sh(e,Oh);var t=Sh(e.firestore,ed),n=td(t),r=new $d(t);return Pd(e._query),Jh(n,e._query).then((function(n){return new Xd(t,r,e,n)}))}function tp(e,t,n){e=Sh(e,Dh);var r=Sh(e.firestore,ed),i=Gd(e.converter,t,n);return ip(r,[pd(dd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ls.none())])}function np(e,t,n){e=Sh(e,Dh);for(var r=Sh(e.firestore,ed),i=dd(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ip(r,[("string"==typeof(t=ne(t))||t instanceof id?bd(i,"updateDoc",e._key,t,n,o):kd(i,"updateDoc",e._key,t)).toMutation(e._key,ls.exists(!0))])}function rp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ne(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||$h(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if($h(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Dh)l=Sh(e.firestore,ed),f=Ru(e._key.path),c={next:function(t){n[s]&&n[s](ap(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Sh(e,Oh);l=Sh(p.firestore,ed),f=p._query;var v=new $d(l);c={next:function(e){n[s]&&n[s](new Xd(l,v,p,e))},error:n[s+1],complete:n[s+2]},Pd(e._query)}return function(e,t,n,r){var i=new Uh(r),a=new Uf(t,i,n);return e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Nf,t.next=3,Qh(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Df,t.next=3,Qh(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(td(l),f,h,c)}function ip(e,t){return function(e,t){var n=new Ma;return e.asyncQueue.enqueueAndForget(g(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Xf,r.next=3,Kh(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(td(e),t)}function ap(e,t,n){var r=n.docs.get(t._key),i=new $d(e);return new Qd(e,i,t._key,r,new Kd(n.hasPendingWrites,n.fromCache),t.converter)}function op(){return new md("serverTimestamp")}function up(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gd("arrayUnion",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xa=e}(Xe),We(new re("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ed(new ja(e.getProvider("auth-internal")),new Ha(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new La(Pa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),$e(_a,"3.8.3",e),$e(_a,"3.8.3","esm2017")}();$e("firebase","9.17.1","app");function sp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var cp;Object.create;function lp(){return I({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var fp=lp,hp=new K("auth","Firebase",lp()),dp=new pe("@firebase/auth");function pp(e){if(dp.logLevel<=ue.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dp.error.apply(dp,["Auth (".concat(Xe,"): ").concat(e)].concat(n))}}function vp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gp.apply(void 0,[e].concat(n))}function yp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gp.apply(void 0,[e].concat(n))}function mp(e,t,n){var r=Object.assign(Object.assign({},fp()),I({},t,n));return new K("auth","Firebase",r).create(t,{appName:e.name})}function gp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=E(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(E(o)))}return hp.create.apply(hp,[e].concat(n))}function kp(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gp.apply(void 0,[t].concat(r))}}function bp(e){var t="INTERNAL ASSERTION FAILED: "+e;throw pp(t),new Error(t)}function wp(e,t){e||bp(t)}var _p=new Map;function Ep(e){wp(e instanceof Function,"Expected a class definition");var t=_p.get(e);return t?(wp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_p.set(e,t),t)}function xp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ap(){return"http:"===Tp()||"https:"===Tp()}function Tp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Sp(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ap()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Ip=function(){function e(t,n){x(this,e),this.shortDelay=t,this.longDelay=n,wp(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(B())||"object"===typeof navigator&&"ReactNative"===navigator.product}return S(e,[{key:"get",value:function(){return Sp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Cp(e,t){wp(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Np=function(){function e(){x(this,e)}return S(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void bp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void bp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void bp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rp=(I(cp={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),I(cp,"MISSING_CUSTOM_TOKEN","internal-error"),I(cp,"INVALID_IDENTIFIER","invalid-email"),I(cp,"MISSING_CONTINUE_URI","internal-error"),I(cp,"INVALID_PASSWORD","wrong-password"),I(cp,"MISSING_PASSWORD","internal-error"),I(cp,"EMAIL_EXISTS","email-already-in-use"),I(cp,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),I(cp,"INVALID_IDP_RESPONSE","invalid-credential"),I(cp,"INVALID_PENDING_TOKEN","invalid-credential"),I(cp,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),I(cp,"MISSING_REQ_TYPE","internal-error"),I(cp,"EMAIL_NOT_FOUND","user-not-found"),I(cp,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),I(cp,"EXPIRED_OOB_CODE","expired-action-code"),I(cp,"INVALID_OOB_CODE","invalid-action-code"),I(cp,"MISSING_OOB_CODE","internal-error"),I(cp,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),I(cp,"INVALID_ID_TOKEN","invalid-user-token"),I(cp,"TOKEN_EXPIRED","user-token-expired"),I(cp,"USER_NOT_FOUND","user-token-expired"),I(cp,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),I(cp,"INVALID_CODE","invalid-verification-code"),I(cp,"INVALID_SESSION_INFO","invalid-verification-id"),I(cp,"INVALID_TEMPORARY_PROOF","invalid-credential"),I(cp,"MISSING_SESSION_INFO","missing-verification-id"),I(cp,"SESSION_EXPIRED","code-expired"),I(cp,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),I(cp,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),I(cp,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),I(cp,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),I(cp,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),I(cp,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),I(cp,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),I(cp,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),I(cp,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),I(cp,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),I(cp,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),cp),Dp=new Ip(3e4,6e4);function Op(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Pp(e,t,n,r){return Lp.apply(this,arguments)}function Lp(){return Lp=g(y().mark((function e(t,n,r,i){var a,o=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Mp(t,a,g(y().mark((function e(){var a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=J(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Np.fetch()(jp(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Lp.apply(this,arguments)}function Mp(e,t,n){return Up.apply(this,arguments)}function Up(){return Up=g(y().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rp),n),e.prev=2,a=new zp(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Bp(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Bp(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Bp(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Bp(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw mp(t,p,d);case 34:vp(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof G)){e.next=41;break}throw e.t0;case 41:vp(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Up.apply(this,arguments)}function Fp(e,t,n,r){return Vp.apply(this,arguments)}function Vp(){return Vp=g(y().mark((function e(t,n,r,i){var a,o,u=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Pp(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&vp(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function jp(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Cp(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var zp=function(){function e(t){var n=this;x(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yp(n.auth,"network-request-failed"))}),Dp.get())}))}return S(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Bp(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yp(e,t,r);return i.customData._tokenResponse=n,i}function qp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pp(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pp(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Kp(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Qp(){return Qp=g(y().mark((function e(t){var n,r,i,a,o,u,s=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ne(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,kp((a=Xp(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Kp(Yp(a.auth_time)),issuedAtTime:Kp(Yp(a.iat)),expirationTime:Kp(Yp(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Yp(e){return 1e3*Number(e)}function Xp(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return pp("JWT malformed, contained fewer than 3 sections"),null;try{var a=O(r);return a?JSON.parse(a):(pp("Failed to decode base64 JWT payload"),null)}catch(o){return pp("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Jp(e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=g(y().mark((function e(t,n){var r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof G&&$p(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Zp.apply(this,arguments)}function $p(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ev=function(){function e(t){x(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return S(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),tv=function(){function e(t,n){x(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return S(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Kp(this.lastLoginAt),this.creationTime=Kp(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function nv(e){return rv.apply(this,arguments)}function rv(){return rv=g(y().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Jp(t,Wp(r,{idToken:i}));case 6:kp(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=sp(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=av(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new tv(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),rv.apply(this,arguments)}function iv(){return(iv=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne(t),e.next=3,nv(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(E(n),E(t))}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mp(t,{},g(y().mark((function e(){var r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=jp(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Np.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}var sv=function(){function e(){x(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return S(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){kp(e.idToken,"internal-error"),kp("undefined"!==typeof e.idToken,"internal-error"),kp("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Xp(e);return kp(t,"internal-error"),kp("undefined"!==typeof t.exp,"internal-error"),kp("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=g(y().mark((function e(t){var n,r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],kp(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ov(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return bp("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(kp("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(kp("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(kp("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function cv(e,t){kp("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var lv=function(){function e(t){x(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ev(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?E(a.providerData):[],this.metadata=new tv(a.createdAt||void 0,a.lastLoginAt||void 0)}return S(e,[{key:"getIdToken",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jp(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(kp(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Qp.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return iv.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(kp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){kp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=g(y().mark((function e(t){var n,r,i=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,nv(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Jp(this,qp(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;kp(k&&E,t,"internal-error");var x=sv.fromJSON(this.name,E);kp("string"===typeof k,t,"internal-error"),cv(f,t.name),cv(h,t.name),kp("boolean"===typeof b,t,"internal-error"),kp("boolean"===typeof w,t,"internal-error"),cv(d,t.name),cv(p,t.name),cv(v,t.name),cv(y,t.name),cv(m,t.name),cv(g,t.name);var A=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(A.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(A._redirectEventId=y),A}},{key:"_fromIdTokenResponse",value:function(){var t=g(y().mark((function t(n,r){var i,a,o,u=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new sv).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,nv(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),fv=function(){function e(){x(this,e),this.type="NONE",this.storage={}}return S(e,[{key:"_isAvailable",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();fv.type="NONE";var hv=fv;function dv(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var pv=function(){function e(t,n,r){x(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=dv(this.userKey,a.apiKey,o),this.fullPersistenceKey=dv("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return S(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?lv._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=g(y().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,v,m=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ep(hv),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ep(hv),u=dv(i,n.config.apiKey,n.name),s=null,c=p(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=lv._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function vv(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wv(t))return"Blackberry";if(_v(t))return"Webos";if(mv(t))return"Safari";if((t.includes("chrome/")||gv(t))&&!t.includes("edge/"))return"Chrome";if(bv(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function yv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/firefox\//i.test(e)}function mv(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:B()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/crios\//i.test(e)}function kv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/iemobile/i.test(e)}function bv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/android/i.test(e)}function wv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/blackberry/i.test(e)}function _v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/webos/i.test(e)}function Ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xv(){return function(){var e=B();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Av(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return Ev(e)||bv(e)||_v(e)||wv(e)||/windows phone/i.test(e)||kv(e)}function Tv(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=vv(B());break;case"Worker":t="".concat(vv(B()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Xe,"/").concat(r)}var Sv=function(){function e(t){x(this,e),this.auth=t,this.queue=[]}return S(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=g(y().mark((function e(t){var n,r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=p(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=p(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Iv=function(){function e(t,n,r){x(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new Sv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hp,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return S(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ep(t)),this._initializationPromise=this.queue(g(y().mark((function r(){var i,a;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,pv.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=g(y().mark((function e(t){var n,r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return kp(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nv(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ne(t):null)&&kp(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=g(y().mark((function e(t){var n,r=this,i=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&kp(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(g(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ep(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new K("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return kp(n=t&&Ep(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,pv.create(this,[Ep(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=g(y().mark((function e(t){var n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return kp(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return kp(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tv(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=g(y().mark((function e(){var t,n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cv(e){return ne(e)}var Nv=function(){function e(t){var n=this;x(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new ee(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return S(e,[{key:"next",get:function(){return kp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Rv(e,t,n){var r=Cv(e);kp(r._canInitEmulator,r,"emulator-config-failed"),kp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Dv(t),o=function(e){var t=Dv(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ov(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Ov(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Dv(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ov(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Pv=function(){function e(t,n){x(this,e),this.providerId=t,this.signInMethod=n}return S(e,[{key:"toJSON",value:function(){return bp("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return bp("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return bp("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return bp("not implemented")}}]),e}();function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pp(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Uv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithPassword",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Vv(e,t){return jv.apply(this,arguments)}function jv(){return jv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithEmailLink",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function zv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithEmailLink",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}var qv=function(e){k(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return x(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return S(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Uv(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Vv(t,{email:this._email,oobCode:this._password}));case 5:vp(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Lv(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",zv(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:vp(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Pv);function Hv(e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithIdp",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}var Gv=function(e){k(n,e);var t=w(n);function n(){var e;return x(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return S(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Hv(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Hv(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Hv(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vp("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sp(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Pv);function Kv(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pp(t,"POST","/v1/accounts:sendVerificationCode",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(){return Yv=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithPhoneNumber",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Xv(){return Xv=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp(t,"POST","/v1/accounts:signInWithPhoneNumber",Op(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Bp(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}var Jv=I({},"USER_NOT_FOUND","user-not-found");function Zv(){return Zv=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Fp(t,"POST","/v1/accounts:signInWithPhoneNumber",Op(t,r),Jv));case 2:case"end":return e.stop()}}),e)}))),Zv.apply(this,arguments)}var $v=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this,"phone","phone")).params=e,r}return S(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Yv.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Xv.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Zv.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Pv);var ey=function(){function e(t){var n,r,i,a,o,u;x(this,e);var s=Z($(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);kp(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return S(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Z($(e)).link,n=t?Z($(t)).deep_link_id:null,r=Z($(e)).deep_link_id;return(r?Z($(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Ih){return null}}}]),e}();var ty=function(){function e(){x(this,e),this.providerId=e.PROVIDER_ID}return S(e,null,[{key:"credential",value:function(e,t){return qv._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ey.parseLink(t);return kp(n,"argument-error"),qv._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ty.PROVIDER_ID="password",ty.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ty.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ny=function(){function e(t){x(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return S(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ry=function(e){k(n,e);var t=w(n);function n(){var e;return x(this,n),(e=t.apply(this,arguments)).scopes=[],e}return S(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return E(this.scopes)}}]),n}(ny),iy=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.call(this,"facebook.com")}return S(n,null,[{key:"credential",value:function(e){return Gv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ih){return null}}}]),n}(ry);iy.FACEBOOK_SIGN_IN_METHOD="facebook.com",iy.PROVIDER_ID="facebook.com";var ay=function(e){k(n,e);var t=w(n);function n(){var e;return x(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return S(n,null,[{key:"credential",value:function(e,t){return Gv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Ih){return null}}}]),n}(ry);ay.GOOGLE_SIGN_IN_METHOD="google.com",ay.PROVIDER_ID="google.com";var oy=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.call(this,"github.com")}return S(n,null,[{key:"credential",value:function(e){return Gv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ih){return null}}}]),n}(ry);oy.GITHUB_SIGN_IN_METHOD="github.com",oy.PROVIDER_ID="github.com";var uy=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.call(this,"twitter.com")}return S(n,null,[{key:"credential",value:function(e,t){return Gv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Ih){return null}}}]),n}(ry);function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t,"POST","/v1/accounts:signUp",Op(t,n)));case 1:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}uy.TWITTER_SIGN_IN_METHOD="twitter.com",uy.PROVIDER_ID="twitter.com";var ly=function(){function e(t){x(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return S(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=g(y().mark((function t(n,r,i){var a,o,u,s,c=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,lv._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=fy(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=g(y().mark((function t(n,r,i){var a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=fy(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function fy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var hy=function(e){k(n,e);var t=w(n);function n(e,r,i,a){var o,u;return x(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return S(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(G);function dy(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw hy._fromErrorAndOperation(e,n,t,r);throw n}))}function py(e,t){return vy.apply(this,arguments)}function vy(){return vy=g(y().mark((function e(t,n){var r,i,a=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Jp,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ly._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),vy.apply(this,arguments)}function yy(e,t){return my.apply(this,arguments)}function my(){return my=g(y().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Jp(t,dy(i,a,n,t),r);case 6:return kp((o=e.sent).idToken,i,"internal-error"),kp(u=Xp(o.idToken),i,"internal-error"),s=u.sub,kp(t.uid===s,i,"user-mismatch"),e.abrupt("return",ly._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&vp(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),my.apply(this,arguments)}function gy(e,t){return ky.apply(this,arguments)}function ky(){return ky=g(y().mark((function e(t,n){var r,i,a,o,u=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,dy(t,i,n);case 4:return a=e.sent,e.next=7,ly._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ky.apply(this,arguments)}function by(e,t){return wy.apply(this,arguments)}function wy(){return wy=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gy(Cv(t),n));case 1:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function _y(e,t,n){return Ey.apply(this,arguments)}function Ey(){return Ey=g(y().mark((function e(t,n,r){var i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cv(t),e.next=3,sy(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ly._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function xy(e,t,n){return by(ne(e),ty.credential(t,n))}function Ay(e,t){return Ty.apply(this,arguments)}function Ty(){return Ty=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pp(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ty.apply(this,arguments)}function Sy(e,t){return Iy.apply(this,arguments)}function Iy(){return(Iy=g(y().mark((function e(t,n){var r,i,a,o,u,s,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ne(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Jp(a,Ay(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cy(e,t){return Pp(e,"POST","/v2/accounts/mfaEnrollment:start",Op(e,t))}new WeakMap;var Ny="__sak",Ry=function(){function e(t,n){x(this,e),this.storageRetriever=t,this.type=n}return S(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ny,"1"),this.storage.removeItem(Ny),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ih){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Dy=10,Oy=function(e){k(n,e);var t=w(n);function n(){var e;return x(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=B();return mv(e)||Ev(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Av(),e._shouldAllowMigration=!0,e}return S(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);xv()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Dy):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=g(y().mark((function e(t,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=g(y().mark((function e(t){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ry);Oy.type="LOCAL";var Py=Oy,Ly=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return S(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ry);Ly.type="SESSION";var My=Ly;function Uy(e){return Promise.all(e.map(function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Fy=function(){function e(t){x(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return S(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=g(y().mark((function e(t){var n,r,i,a,o,u,s,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Uy(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Vy(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fy.receivers=[];var jy=function(){function e(t){x(this,e),this.target=t,this.handlers=new Set}return S(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=g(y().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Vy("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function zy(){return window}function By(){return"undefined"!==typeof zy().WorkerGlobalScope&&"function"===typeof zy().importScripts}function qy(){return Hy.apply(this,arguments)}function Hy(){return(Hy=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Wy(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Gy="firebaseLocalStorageDb",Ky=1,Qy="firebaseLocalStorage",Yy="fbase_key",Xy=function(){function e(t){x(this,e),this.request=t}return S(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Jy(e,t){return e.transaction([Qy],t?"readwrite":"readonly").objectStore(Qy)}function Zy(){var e=indexedDB.deleteDatabase(Gy);return new Xy(e).toPromise()}function $y(){var e=indexedDB.open(Gy,Ky);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Qy,{keyPath:Yy})}catch(r){n(r)}})),e.addEventListener("success",g(y().mark((function n(){var r;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Qy)){n.next=12;break}return r.close(),n.next=5,Zy();case 5:return n.t0=t,n.next=8,$y();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Jy(t,!0).put((I(i={},Yy,n),I(i,"value",r),i)),e.abrupt("return",new Xy(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),tm.apply(this,arguments)}function nm(e,t){return rm.apply(this,arguments)}function rm(){return rm=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t,!1).get(n),e.next=3,new Xy(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}function im(e,t){var n=Jy(e,!0).delete(t);return new Xy(n).toPromise()}var am=function(){function e(){x(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return S(e,[{key:"_openDb",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,$y();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",By()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=g(y().mark((function e(){var t=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Fy._getInstance(By()?self:null),this.receiver._subscribe("keyChanged",function(){var e=g(y().mark((function e(n,r){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=g(y().mark((function e(){var t,n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qy();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new jy(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Wy()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,$y();case 5:return t=e.sent,e.next=8,em(t,Ny,"1");case 8:return e.next=10,im(t,Ny);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=g(y().mark((function e(t,n){var r=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return em(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return nm(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=g(y().mark((function e(t){var n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return im(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Jy(e,!1).getAll();return new Xy(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=p(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();am.type="LOCAL";var om=am;function um(e,t){return Pp(e,"POST","/v2/accounts/mfaSignIn:start",Op(e,t))}function sm(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function cm(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}cm("rcb"),new Ip(3e4,6e4);var lm="recaptcha";function fm(e,t,n){return hm.apply(this,arguments)}function hm(){return hm=g(y().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,kp("string"===typeof a,t,"argument-error"),kp(r.type===lm,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return kp("enroll"===u.type,t,"internal-error"),e.next=13,Cy(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return kp("signin"===u.type,t,"internal-error"),kp(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,um(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Kv(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),hm.apply(this,arguments)}var dm=function(){function e(t){x(this,e),this.providerId=e.PROVIDER_ID,this.auth=Cv(t)}return S(e,[{key:"verifyPhoneNumber",value:function(e,t){return fm(this.auth,e,ne(t))}}],[{key:"credential",value:function(e,t){return $v._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?$v._fromTokenResponse(n,r):null}}]),e}();function pm(e,t){return t?Ep(t):(kp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dm.PROVIDER_ID="phone",dm.PHONE_SIGN_IN_METHOD="phone";var vm=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this,"custom","custom")).params=e,r}return S(n,[{key:"_getIdTokenResponse",value:function(e){return Hv(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Hv(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Hv(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Pv);function ym(e){return gy(e.auth,new vm(e),e.bypassAuthState)}function mm(e){var t=e.auth,n=e.user;return kp(n,t,"internal-error"),yy(n,new vm(e),e.bypassAuthState)}function gm(e){return km.apply(this,arguments)}function km(){return km=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,kp(r=t.user,n,"internal-error"),e.abrupt("return",py(r,new vm(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}var bm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];x(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return S(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=g(y().mark((function t(n,r){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=g(y().mark((function e(t){var n,r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ym;case"linkViaPopup":case"linkViaRedirect":return gm;case"reauthViaPopup":case"reauthViaRedirect":return mm;default:vp(this.auth,"internal-error")}}},{key:"resolve",value:function(e){wp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){wp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),wm=new Ip(2e3,1e4);var _m=function(e){k(n,e);var t=w(n);function n(e,r,i,a,o){var u;return x(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(u),u}return S(n,[{key:"executeNotNull",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return kp(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=g(y().mark((function e(){var t,n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp(1===this.filter.length,"Popup operations only handle one event"),t=Vy(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yp(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yp(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yp(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,wm.get())}()}}]),n}(bm);_m.currentPopupAction=null;var Em="pendingRedirect",xm=new Map,Am=function(e){k(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return S(n,[{key:"execute",value:function(){var e=g(y().mark((function e(){var t,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xm.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Tm(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,d(h(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:xm.set(this.auth._key(),t);case 21:return this.bypassAuthState||xm.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=g(y().mark((function e(t){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",d(h(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",d(h(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bm);function Tm(e,t){return Sm.apply(this,arguments)}function Sm(){return Sm=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nm(n),i=Cm(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Sm.apply(this,arguments)}function Im(e,t){xm.set(e._key(),t)}function Cm(e){return Ep(e._redirectPersistence)}function Nm(e){return dv(Em,e.config.apiKey,e.name)}function Rm(e,t){return Dm.apply(this,arguments)}function Dm(){return Dm=g(y().mark((function e(t,n){var r,i,a,o,u,s=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Cv(t),a=pm(i,n),o=new Am(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Dm.apply(this,arguments)}var Om=function(){function e(t){x(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return S(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Lm(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yp(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pm(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Pm(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Pm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Lm(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Mm(e){return Um.apply(this,arguments)}function Um(){return Um=g(y().mark((function e(t){var n,r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Pp(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Um.apply(this,arguments)}var Fm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vm=/^https?/;function jm(){return jm=g(y().mark((function e(t){var n,r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Mm(t);case 4:n=e.sent,r=n.authorizedDomains,i=p(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!zm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:vp(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),jm.apply(this,arguments)}function zm(e){var t=xp(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Vm.test(r))return!1;if(Fm.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bm=new Ip(3e4,6e4);function qm(){var e=zy().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=E(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Hm=null;function Wm(e){return Hm=Hm||function(e){return new Promise((function(t,n){var r,i,a;function o(){qm(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){qm(),n(yp(e,"network-request-failed"))},timeout:Bm.get()})}if(null===(i=null===(r=zy().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=zy().gapi)||void 0===a?void 0:a.load)){var u=cm("iframefcb");return zy()[u]=function(){gapi.load?o():n(yp(e,"network-request-failed"))},sm("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Hm=null,e}))}(e),Hm}var Gm=new Ip(5e3,15e3),Km="__/auth/iframe",Qm="emulator/auth/iframe",Ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jm(e){var t=e.config;kp(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Cp(t,Qm):"https://".concat(e.config.authDomain,"/").concat(Km),r={apiKey:t.apiKey,appName:e.name,v:Xe},i=Xm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(J(r).slice(1))}function Zm(e){return $m.apply(this,arguments)}function $m(){return $m=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wm(t);case 2:return n=e.sent,kp(r=zy().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Jm(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ym,dontclear:!0},(function(e){return new Promise(function(){var n=g(y().mark((function n(r,i){var a,o,u;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){zy().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yp(t,"network-request-failed"),o=zy().setTimeout((function(){i(a)}),Gm.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}var eg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tg=500,ng=600,rg="_blank",ig="http://localhost",ag=function(){function e(t){x(this,e),this.window=t,this.associatedEvent=null}return S(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function og(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tg,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ng,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},eg),{width:r.toString(),height:i.toString(),top:a,left:o}),l=B().toLowerCase();n&&(u=gv(l)?rg:n),yv(l)&&(t=t||ig,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ev(arguments.length>0&&void 0!==arguments[0]?arguments[0]:B())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new ag(null);var h=window.open(t||"",u,f);kp(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ag(h)}var ug="__/auth/handler",sg="emulator/auth/handler";function cg(e,t,n,r,i,a){kp(e.config.authDomain,e,"auth-domain-config-required"),kp(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xe,eventId:i};if(t instanceof ny){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ry){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ug);return Cp(t,sg)}(e),"?").concat(J(p).slice(1))}var lg="webStorageSupport",fg=function(){function e(){x(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=My,this._completeRedirectFn=Rm,this._overrideRedirectResult=Im}return S(e,[{key:"_openPopup",value:function(){var e=g(y().mark((function e(t,n,r,i){var a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=cg(t,n,r,xp(),i),e.abrupt("return",og(t,o,Vy()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=g(y().mark((function e(t,n,r,i){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=cg(t,n,r,xp(),i),zy().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(wp(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zm(t);case 2:return n=e.sent,r=new Om(t),n.register("authEvent",(function(e){return kp(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lg,{type:lg},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lg];void 0!==i&&t(!!i),vp(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return jm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Av()||mv()||Ev()}}]),e}(),hg=fg,dg=function(){function e(t){x(this,e),this.factorId=t}return S(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return bp("unexpected MultiFactorSessionType")}}}]),e}(),pg=function(e){k(n,e);var t=w(n);function n(e){var r;return x(this,n),(r=t.call(this,"phone")).credential=e,r}return S(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Pp(e,"POST","/v2/accounts/mfaEnrollment:finalize",Op(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Pp(e,"POST","/v2/accounts/mfaSignIn:finalize",Op(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(dg);(function(){function e(){x(this,e)}return S(e,null,[{key:"assertion",value:function(e){return pg._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var vg="@firebase/auth",yg="0.21.3",mg=function(){function e(t){x(this,e),this.auth=t,this.internalListeners=new Map}return S(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){kp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var gg,kg=V("authIdTokenMaxAge")||300,bg=null,wg=function(e){return function(){var t=g(y().mark((function t(n){var r,i,a;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>kg)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,bg!==a){t.next=12;break}return t.abrupt("return");case 12:return bg=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};gg="Browser",We(new re("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){kp(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),kp(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:gg,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tv(gg)},i=new Iv(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ep);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),We(new re("auth-internal",(function(e){return function(e){return new mg(e)}(Cv(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),$e(vg,yg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gg)),$e(vg,yg,"esm2017");var _g,Eg="firebasestorage.googleapis.com",xg="storageBucket",Ag=12e4,Tg=6e5,Sg=1e3,Ig=function(e){k(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return x(this,n),(i=t.call(this,Cg(e),"Firebase Storage: ".concat(r," (").concat(Cg(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(b(i),n.prototype),i}return S(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Cg(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(G);function Cg(e){return"storage/"+e}function Ng(){return new Ig(_g.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Rg(){return new Ig(_g.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Dg(){return new Ig(_g.CANCELED,"User canceled the upload/download.")}function Og(){return new Ig(_g.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pg(e){return new Ig(_g.INVALID_ARGUMENT,e)}function Lg(){return new Ig(_g.APP_DELETED,"The Firebase app was deleted.")}function Mg(e,t){return new Ig(_g.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ug(e){throw new Ig(_g.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(_g||(_g={}));var Fg,Vg=function(){function e(t,n){x(this,e),this.bucket=t,this.path_=n}return S(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Ig(_g.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Eg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Ig(_g.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),jg=function(){function e(t){x(this,e),this.promise_=Promise.reject(t)}return S(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function zg(e){return"string"===typeof e||e instanceof String}function Bg(e){return qg()&&e instanceof Blob}function qg(){return"undefined"!==typeof Blob&&!q()}function Hg(e,t,n,r){if(r<t)throw Pg("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Pg("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Wg(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Gg(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Kg(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fg||(Fg={}));var Qg=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];x(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return S(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Ng();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Lg():Dg());else i(Rg())}};this.canceled_?t(0,new Yg(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Yg(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Fg.NO_ERROR,a=r.getStatus();if(!n||Kg(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Fg.ABORT;t(!1,new Yg(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Yg(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Yg=S((function e(t,n,r){x(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Xg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Jg(){for(var e=Xg(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(qg())return new Blob(n);throw new Ig(_g.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Zg(e){if("undefined"===typeof atob)throw t="base-64",new Ig(_g.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var $g={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ek=S((function e(t,n){x(this,e),this.data=t,this.contentType=n||null}));function tk(e,t){switch(e){case $g.RAW:return new ek(nk(t));case $g.BASE64:case $g.BASE64URL:return new ek(rk(e,t));case $g.DATA_URL:return new ek(function(e){var t=new ik(e);return t.base64?rk($g.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Mg($g.DATA_URL,"Malformed data URL.")}return nk(t)}(t.rest)}(t),new ik(t).contentType)}throw Ng()}function nk(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function rk(e,t){switch(e){case $g.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Mg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $g.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Mg(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Zg(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Mg(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var ik=S((function e(t){x(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Mg($g.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var ak=function(){function e(t,n){x(this,e);var r=0,i="";Bg(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return S(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Bg(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(qg()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Jg.apply(null,i))}var a=n.map((function(e){return zg(e)?tk($g.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ok(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function uk(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function sk(e,t){return t}var ck=S((function e(t,n,r,i){x(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||sk})),lk=null;function fk(){if(lk)return lk;var e=[];e.push(new ck("bucket")),e.push(new ck("generation")),e.push(new ck("metageneration")),e.push(new ck("name","fullPath",!0));var t=new ck("name");t.xform=function(e,t){return function(e){return!zg(e)||e.length<2?e:uk(e)}(t)},e.push(t);var n=new ck("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ck("timeCreated")),e.push(new ck("updated")),e.push(new ck("md5Hash",null,!0)),e.push(new ck("cacheControl",null,!0)),e.push(new ck("contentDisposition",null,!0)),e.push(new ck("contentEncoding",null,!0)),e.push(new ck("contentLanguage",null,!0)),e.push(new ck("contentType",null,!0)),e.push(new ck("metadata","customMetadata",!0)),lk=e}function hk(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Vg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function dk(e,t,n){var r=ok(t);return null===r?null:hk(e,r,n)}function pk(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var vk=S((function e(t,n,r,i){x(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function yk(e){if(!e)throw Ng()}function mk(e,t){return function(n,r){var i=dk(e,r,t);return yk(null!==i),i}}function gk(e,t){return function(n,r){var i=dk(e,r,t);return yk(null!==i),function(e,t,n,r){var i=ok(t);if(null===i)return null;if(!zg(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Wg("/b/"+o(i)+"/o/"+o(a),n,r)+Gg({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function kk(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ig(_g.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ig(_g.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Ig(_g.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ig(_g.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function bk(e){var t=kk(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Ig(_g.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function wk(e,t,n){var r=Wg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new vk(r,"GET",mk(e,n),i);return a.errorHandler=bk(t),a}function _k(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ek(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=_k(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+pk(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=ak.getBlob(c,r,l);if(null===f)throw Og();var h={name:s.fullPath},d=Wg(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new vk(d,"POST",mk(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=kk(t),v}var xk=S((function e(t,n,r,i){x(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Ak(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){yk(!1)}return yk(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Tk=262144;function Sk(e,t,n,r,i,a,o,u){var s=new xk(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Ig(_g.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw Og();var v=t.maxUploadRetryTime,y=new vk(n,"POST",(function(e,n){var i,o=Ak(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?mk(t,a)(e,n):null,new xk(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=kk(e),y}var Ik={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ck(e){switch(e){case"running":case"pausing":case"canceling":return Ik.RUNNING;case"paused":return Ik.PAUSED;case"success":return Ik.SUCCESS;case"canceled":return Ik.CANCELED;default:return Ik.ERROR}}var Nk=S((function e(t,n,r){x(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Rk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Dk=null,Ok=function(){function e(){var t=this;x(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fg.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Fg.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Fg.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return S(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Ug("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Ug("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Ug("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Ug("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Ug("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Pk=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Ok);function Lk(){return Dk?Dk():new Pk}var Mk=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;x(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=fk(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(_g.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Kg(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,Sg),r._needToFetchStatus=!0,void r.completeTransitions_();e=Rg()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(_g.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return S(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=_k(t,r,i),u={name:o.fullPath},s=Wg(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=pk(o,n),f=e.maxUploadRetryTime,h=new vk(s,"POST",(function(e){var t;Ak(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){yk(!1)}return yk(zg(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=kk(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Lk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new vk(n,"POST",(function(e){var t=Ak(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){yk(!1)}n||yk(!1);var i=Number(n);return yk(!isNaN(i)),new xk(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=kk(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Lk,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Tk*this._chunkMultiplier,n=new xk(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Sk(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Lk,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Tk*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=wk(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Lk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Ek(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Lk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Dg(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Ck(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Nk(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Ck(this._state)){case Ik.SUCCESS:Rk(this._resolve.bind(null,this.snapshot))();break;case Ik.CANCELED:case Ik.ERROR:Rk(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Ck(this._state)){case Ik.RUNNING:case Ik.PAUSED:e.next&&Rk(e.next.bind(e,this.snapshot))();break;case Ik.SUCCESS:e.complete&&Rk(e.complete.bind(e))();break;case Ik.CANCELED:case Ik.ERROR:default:e.error&&Rk(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Uk=function(){function e(t,n){x(this,e),this._service=t,this._location=n instanceof Vg?n:Vg.makeFromUrl(n,t.host)}return S(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Vg(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return uk(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Vg(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Ig(_g.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function Fk(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Wg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new vk(r,"GET",gk(e,n),i);return a.errorHandler=bk(t),a}(e.storage,e._location,fk());return e.storage.makeRequestWithTokens(t,Lk).then((function(e){if(null===e)throw new Ig(_g.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Vk(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Vg(e._location.bucket,n);return new Uk(e.storage,r)}function jk(e,t){if(e instanceof qk){var n=e;if(null==n._bucket)throw new Ig(_g.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xg+"' property when initializing the app?");var r=new Uk(n,n._bucket);return null!=t?jk(r,t):r}return void 0!==t?Vk(e,t):e}function zk(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof qk)return new Uk(e,t);throw Pg("To use ref(service, url), the first argument must be a Storage instance.")}return jk(e,t)}function Bk(e,t){var n=null===t||void 0===t?void 0:t[xg];return null==n?null:Vg.makeFromBucketSpec(n,e)}var qk=function(){function e(t,n,r,i,a){x(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Eg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ag,this._maxUploadRetryTime=Tg,this._requests=new Set,this._bucket=null!=i?Vg.makeFromBucketSpec(i,this._host):Bk(this._host,this.app.options)}return S(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Vg.makeFromBucketSpec(this._url,e):this._bucket=Bk(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Hg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Hg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Uk(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jg(Lg());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Gg(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Qg(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Hk="@firebase/storage",Wk="0.11.1",Gk="storage";function Kk(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Mk(e,new ak(t),n)}(e=ne(e),t,n)}function Qk(e){return Fk(e=ne(e))}function Yk(e,t){return zk(e=ne(e),t)}function Xk(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:z(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Jk(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new qk(r,i,a,n,Xe)}We(new re(Gk,Jk,"PUBLIC").setMultipleInstances(!0)),$e(Hk,Wk,""),$e(Hk,Wk,"esm2017");Je({apiKey:"AIzaSyDS2mLI-YuoAiEBgVX0QG2125c7jv-iybQ",authDomain:"real-time-texting-demo.firebaseapp.com",projectId:"real-time-texting-demo",storageBucket:"real-time-texting-demo.appspot.com",messagingSenderId:"1088642878295",appId:"1:1088642878295:web:178f76c74d0c3d74f24c12",measurementId:"G-Z11L1Y9YQJ"});var Zk,$k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze(),t=Ge(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Ge(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Y(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;vp(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:hg,persistence:[om,Py,My]}),r=V("authTokenSyncURL");if(r){var i=wg(r);!function(e,t,n){ne(e).beforeAuthStateChanged(t,n)}(n,i,(function(){return i(n.currentUser)})),function(e,t,n,r){ne(e).onIdTokenChanged(t,n,r)}(n,(function(e){return i(e)}))}var a=M("auth");return a&&Rv(n,"http://".concat(a)),n}(),eb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze(),t=arguments.length>1?arguments[1]:void 0,n=Ge(e=ne(e),Gk).getImmediate({identifier:t}),r=U("storage");return r&&Xk.apply(void 0,[n].concat(E(r))),n}(),tb=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Ge("object"==typeof e?e:Ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=U("firestore");i&&Rh.apply(void 0,[r].concat(E(i)))}return r}(),nb=n(184),rb=(0,e.createContext)(),ib=function(t){var n=t.children,r=s((0,e.useState)({}),2),i=r[0],a=r[1];return(0,e.useEffect)((function(){var e=function(e,t,n,r){return ne(e).onAuthStateChanged(t,n,r)}($k,(function(e){a(e),console.log(e)}));return function(){e()}}),[]),(0,nb.jsx)(rb.Provider,{value:{currentUser:i},children:n})},ab=(0,e.createContext)(),ob=function(t){var n=t.children,r=(0,e.useContext)(rb).currentUser,i=(0,e.useReducer)((function(e,t){return"CHANGE_USER"===t.type?{user:t.payload,chatId:r.uid>t.payload.uid?r.uid+t.payload.uid:t.payload.uid+r.uid}:e}),{chatId:"null",user:{}}),a=s(i,2),o=a[0],u=a[1];return(0,nb.jsx)(ab.Provider,{value:{data:o,dispatch:u},children:n})},ub=function(t){var n=t.message,r=(0,e.useContext)(rb).currentUser,i=(0,e.useContext)(ab).data,a=(0,e.useRef)();return(0,e.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,nb.jsxs)("div",{ref:a,className:"message ".concat(n.senderId===r.uid&&"owner"),children:[(0,nb.jsxs)("div",{className:"messageInfo",children:[(0,nb.jsx)("img",{src:n.senderId===r.uid?r.photoURL:i.user.photoURL,alt:""}),(0,nb.jsx)("span",{children:"just now"})]}),(0,nb.jsxs)("div",{className:"messageContent",children:[(0,nb.jsx)("p",{children:n.text}),n.img&&(0,nb.jsx)("img",{src:n.img,alt:""})]})]})},sb=function(){var t=s((0,e.useState)([]),2),n=t[0],r=t[1],i=(0,e.useContext)(ab).data;return(0,e.useEffect)((function(){var e=rp(Mh(tb,"chats",i.chatId),(function(e){e.exists()&&r(e.data().messages)}));return function(){e()}}),[i.chatId]),(0,nb.jsx)("div",{className:"messages",children:n.map((function(e){return(0,nb.jsx)(ub,{message:e},e.id)}))})},cb=new Uint8Array(16);function lb(){if(!Zk&&!(Zk="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zk(cb)}var fb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var hb=function(e){return"string"===typeof e&&fb.test(e)},db=[],pb=0;pb<256;++pb)db.push((pb+256).toString(16).substr(1));var vb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(db[e[t+0]]+db[e[t+1]]+db[e[t+2]]+db[e[t+3]]+"-"+db[e[t+4]]+db[e[t+5]]+"-"+db[e[t+6]]+db[e[t+7]]+"-"+db[e[t+8]]+db[e[t+9]]+"-"+db[e[t+10]]+db[e[t+11]]+db[e[t+12]]+db[e[t+13]]+db[e[t+14]]+db[e[t+15]]).toLowerCase();if(!hb(n))throw TypeError("Stringified UUID is invalid");return n};var yb,mb=function(e,t,n){var r=(e=e||{}).random||(e.rng||lb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return vb(r)},gb=function(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(null),2),a=i[0],o=i[1],u=(0,e.useContext)(rb).currentUser,c=(0,e.useContext)(ab).data,l=function(){var e=g(y().mark((function e(){var t,i,s,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}s=Yk(eb,mb()),(l=Kk(s,a)).on((function(e){}),(function(){Qk(l.snapshot.ref).then(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,np(Mh(tb,"chats",c.chatId),{messages:up({id:mb(),text:n,senderId:u.uid,date:Ya.now(),img:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),e.next=8;break;case 6:return e.next=8,np(Mh(tb,"chats",c.chatId),{messages:up({id:mb(),text:n,senderId:u.uid,date:Ya.now()})});case 8:return e.next=10,np(Mh(tb,"userChats",u.uid),(I(t={},c.chatId+".lastMessage",{text:n}),I(t,c.chatId+".date",op()),t));case 10:return e.next=12,np(Mh(tb,"userChats",c.user.uid),(I(i={},c.chatId+".lastMessage",{text:n}),I(i,c.chatId+".date",op()),i));case 12:r(""),o(null);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,nb.jsxs)("div",{className:"input",children:[(0,nb.jsx)("input",{type:"text",placeholder:"Type something...",onChange:function(e){return r(e.target.value)},value:n}),(0,nb.jsxs)("div",{className:"send",children:[(0,nb.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cCEQIAG9wR/4IAAAVhSURBVFjDrZdtTJNXFMf/t0hpFQNayotokNdNhoADNAa3BBRRQtSafjBG3CbEsY3EGLYMZoLf3CcTCUswTmOGkQSKCCqCpYJmJhUo9uU+T6uiKSIgczG+DLGF0rsP2MeKtJSXm/TLc8+5v/M/5zw99yFY5KXr8fcPGCosxNqCArxMTiYFIhHeWSxMVFs7Kq6u3jz07p27PVlMOC0PC8ON5mb8tWnTjAZXzWbni/z8lJNW66IHwCvDw53FHR0IW7cOAPCnzYbPe3uRPDGBifR0hAQGAgD+sVicrRkZKSffvl1U5VRjNlPKGKWM0b6eHl4ZF+fav3921Spu8+3bwv6XZWWLCz/B8x8Ov3tX1xMUNN3OIo2IoN+9fk0pY5yC0kWB67fI5ZyCUhecy+vtNZlWrPAYbGZrK6WMcXscjvp6Pz8AWLIQuH//zZusOikJAMiv9+6RpTk5yckvX3p0+ppM9RxlbOHKV5tMQtovdHfrWXCwNx+LNCKCVr55M70Eonkrb12/HgAg0ekcB7Zv30BevfLk01cSEDD5WU0NspcvBwD25OLFeSl/cDokhA4bjULNZTqdt5q74FxCS4uQrRM8byxdtmzOcEuVTEabDAZfG24mOOf39Cm3OjbW3canEliqZDLHsEaD2JQUAMARvZ4szckR5WVkcAeamnhldvZMcLu6sZFdyssDAJI6OEgUWVlIFoupXKXifisq8l15uV4vpLBcr7dUyWS8ctcu2mW3U8oYl63VzqacV8bF8crERNo3MkIpY7TLbmdMJPKaAV65cqXjcns79qemAgBqDYYlq7Ztc97OzHT+olJhqVgMANhdVzebcjbm7+/8vaMDtrAwAMBYXR0hTqfHAPQsONi5u60NlRs2AABkJpM4Kidngt+40bmjvl6Alx8/nnTk1KmpgMVi26RKNR0+2ebnxyY1GgGubWy0BxYWwhucXujuFtI+bDQ+OB0SYireuZOetdmE5/kVFR+yJRbTH65cmZ52gzkhgeYODQk+Zy5d0vX4+3uE63qCguhPXV2Cg8Zs5pXh4YsCH7l2ra8kIMB3+CuLZb5w87H4eHc4l9DS4hWujZRKuWytVnBQUGosDQ3lGrKyXN0+He6p2z9Rvq65mVe+7xlPiztx/rzgoOA4Y2loKABw8ffvzwVuPhYfz2UMDs4JTpvS02mt00kpY7Skv59XhocD7weI66DttbWzwXllXNxH8LqrV2eDvx/HxcVYPzUqSdPhw18MjowAwPiPEonrPSUpL15A7eUfDgC73NnJDJGRAAB5S4vkb6UyvmF8HLMtWtLfTyljVPvokftzxgih9c+euS4RVK5SuY9hl3JudWwsNQ4M+Nzt7qu+3s+Pi52YoJQxuq+h4ZPeKDl4UDjY7eeCm0wxMe5wruj6dZ/h8OFGlPRHTQ0/MjbG7lZUID0xEf+NjiJYrXZUHT1KHovFot5bt5C+Zs1UJdvalt3Zuzea2O2+BvBxCcYfP/ZmZ2USCWNTvWIsjY4W/ChjNLO11cokkjmB4RrHE+3tAIAHMTGcOjfXk3E0sdkIYUzP1q4V2Ts78X1UFABgUK0OvKNQRBObba4BAABMprQ04TU8/+SJRRoR4cnWWBodzX1jtQrKR9VqbaRUOi/wR2WwnTsnHGocGOAy8vNd6QYAxkQi7sC+fdyW58+Fhkttb18oXABYmUQyWq3R4KvMTGH35+FhYjUYmFwkIiQtjVXL5cJe7Y0bozUKxfSPzXkHIARRXFWFlYcOYf/MlxWyx+GAvbLy36dlZVnE4Vho5mf8OOVKUlIgLSpiuVu3km+jotgFp5MUWK2AWu1QnzmTmvjw4ULBrvU/qwhI40OK5u8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDItMTdUMDI6MDA6MjcrMDA6MDDc0XLNAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTE3VDAyOjAwOjI3KzAwOjAwrYzKcQAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xN1QwMjowMDoyNyswMDowMPqZ664AAAAASUVORK5CYII=",alt:""}),(0,nb.jsx)("input",{type:"file",style:{display:"none"},id:"file",onChange:function(e){return o(e.target.files[0])}}),(0,nb.jsx)("label",{htmlFor:"file",children:(0,nb.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAAAqo0jMgAAAAlwSFlzAAAAYAAAAGAA8GtCzwAAAAd0SU1FB+cCEQIALoqiO6EAAAK/SURBVFjD7ZZfSFNRHMd/Z/2hHtoutghEoZ5E2RViolOI0MQHfQmmFPNJgp4ETUFZKXcPuXxQaI9ZuhfZYBREUWgwJggDRdTdc8xICEwJX8bmm4K7vx7G1nWeu3tnW1D4fTy/373fz+98z/0DcKb/XdQ9OEg/xuOsvbqaVz/PW9zorK9XGl0uEi0vN2KCy8nk0Y+hoVskmcytkW8NDegqK1Oe22zwaXNTF4CZvV5FcrsBALDN+KQX3gaDAJEIAAAiIexJays+EAR4XFkJAGB65XDIMQCTmzGbCoSobyIfdXeTzdlZMppK4XW/n1xdWlLu7+/r2ycSYm04TAhiegdbWhQpHOa2vo/HxadWKz+vltVVShHptYEB47Of1BoKAq2cmmLOUIid29mhFJFdjkaZMxRivv5+fo5ICHWnUpQifn1tLHsjYs5QiFJEOdbVxaubslkQRHCZTAAAVQ/39ooFgNZMhImEbjOliJSmc1RLlu12ejA9TW/29BQKsIaCwN40NyMSotusBUD929uZmizb7cXaHQBVBEZFvmtPQv0dHfRie/upafJFwO7MzOSLgKLHk7meosfD69norKnReiPmBdAFV5vngWB3k0lmPX4YC46AZw5Mkk4UmCSxD+Pj6iV8YbFgRBCKBqBpnjG8MTycC5ErXQBEQrZ6zeZCzdUQWmdCF2Cr12zeaFpYOLiSSLDZkZFCzbNikqQFceyRyhxAUUxPfTg9N4fLjY3Zhs8+HwAAtPX1GTbnSBR/P8pcgEsvLZbDL/Pz6HM4/sTICAD3hyQ9eWnMc8U9A8e2/W8BIBICAUUptSEZTaW4AIQgwlIsVvKRF9fXuQAAANg0MVFygOjkpCZA7bNAAH56vXCK74GuKCL4xsZsVcGgepn7aaXv6urwtstlelRRUQxvZWp3lywGAuK9lZWiD3amf16/AHjJcJsSJHmmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTAyLTE3VDAyOjAwOjQ2KzAwOjAwvMlw/gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wMi0xN1QwMjowMDo0NiswMDowMM2UyEIAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjMtMDItMTdUMDI6MDA6NDYrMDA6MDCagemdAAAAAElFTkSuQmCC",alt:""})}),(0,nb.jsx)("button",{onClick:l,children:"Send"})]})]})},kb=function(){var t,n=(0,e.useContext)(ab).data;return(0,nb.jsxs)("div",{className:"chat",children:[(0,nb.jsxs)("div",{className:"chatInfo",children:[(0,nb.jsx)("span",{children:null===(t=n.user)||void 0===t?void 0:t.displayName}),(0,nb.jsxs)("div",{className:"chatIcons",children:[(0,nb.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfnAhAWMgL2mW/6AAACq0lEQVRo3u3YT0iTcRzH8ff3aUsyqKggicSwoCxhY0GQXcrLOuSfaNmE/kBCRbQOuUNRhzwVMcnKBD0YiZsjCw0jKAi6zA4VqZQHLSroEKuZf5qUzn07GB0atgjbQ/i8bs/D7/f8vp/P4YHnAYvFYrHMXfLrjd5oOK7qculVRsHhoI9tYLdnbKDjycMQi9kabbkQiWy8VVEh8uHDPzvv6dMul2p2tu1hfCmEw7i1CkpKMhV4RgWch/Hx6Qufz5lV2SfS3DzrBfT4w1s0GQiwT08g1dVm506xHDdMTsoleYK6XI5ar1uMFy/+dPtLz82bqjk5iYvJO7B3r14nAKOjCz8vGkNDIUM6tBvxeMzOOaNP3Ae7nUO6FiktTbd88Pi9AU1mZfUuCZ9XPXVqsniqHwYHdVR3Ql0du/URNDfH3wyvRJqabHqbMOTlmZ0zrXL8v5uzp6HtnOquXfHoyCo0EOARqyE/f6b18kYaYM8em9m5/lZvdfi+JgsLdY1uhcuXKaILiouBO6mv9lQaIhcWLPhvCwDtR06fpoihH8H/imF2DLNZBZg9gNmsAswewGxWAWYPYLb/tgCtkldoTQ1T3IK7d+dcAc4N3mtiDAw4N1XeFikpoVWuoG63lHEE+vvTPqCeszA2ZshuvPDundmB0uok8Ls5nQHvYzEePBh6mzOCOhx0Syvq8+GXMxCLpWw4KTsgFLLpNxrR9nZgMeL3m50zxXtiMDGRvDDvGXR2plu+XbaLGInE9FV9fV9fMKgaDE7ZjBuox8NXOQjDw8MFK+qho+PnDxF725dlEArpfg5BWZnZufnKZjQel6gk4NgxR6l3nRgtLbN9TMp303MNelSdTjDawemUclkP8+dnLLhbK+HjR3k9eRSNRBy1B3LEiEYzdr7FYrFY5pDvNGX2n5l3DH0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDItMTZUMjI6NTA6MDIrMDA6MDDynaNpAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTE2VDIyOjUwOjAyKzAwOjAwg8Ab1QAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xNlQyMjo1MDowMiswMDowMNTVOgoAAAAASUVORK5CYII=",alt:""}),(0,nb.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfnAhEBJRChdki0AAAFlUlEQVRo3u2Ze0yVZRzHP7/3aAgO1EpzeAd0S8KDTpcpbipaSrpaOQJyZmDZUjaHeGtuNjVxlZcUS6fIwlviZQqKF5C8YrqmBxNLGkRqzsxSvNQAeX/9w/vOjeiA5xyp1fefs/fd8/6e5/t5Luf7ngP/cYmvOzg3d2OVmhER5reOL5FJk0inO0RH8yMt0e7d7YbdqEEqKrQj0VBQYKTKenTdOueSuBfEOH/+XwPg+6l5pWr6+d07Vfk2smwZg9kHkyczkV1gGI0eWCq/Q20tfvSG1atb+DsuoSkp4dtjXxOjuvofB8A2/m7lQGTfPqpZBcOGeY1sEWPRwsKWhY69MHq0t0A0ekbc6V5w5X1k+XKvG7c0iFxk+PCaTbUfIEuWeKusxyvA3uN3HSbicjV1qTd5wHVbQ4P1SXA6I7MSXhIpKXnYeh4P1D7cfGzckn5MADgcckT+QJOSPK3n8YDla2JhxAhfG68HYiknkJEjmx2AziIFunZ91ADYRx5069bsADjDBlB91P6lnN3e6NfzLZDPL3D58qMGoFNYA5cuNTsAs4JAyM9/1ADowlr04MFmB2BFVju5+Vj212CKIwvJyGh2AHZWr4usvgagbegEq1b1PR4bK3LhQrMDsGRldRZRgh465G3jsoHxaEHB/dm3K9DUVG/V9RjAD5qpqq1aWdm8pemIgJgYniYN0tMfdmvYzy2gHaxYURN3exXExPQfMPkdMWpqvAb2YQ1XvuGXA3PmyBUJhWnTOCO5kJbmvBU3R2TxYqu9a8Lm3arh4VZyswPMzzwBD7wOP8WvUFFhHW7WHvfWUvcYQPH07GzVHj20qDYMdu3iMy5Cnz71GqbSFXJyWnwnqZCS8syVuJMiZWVNHVjx9KxranbowKbHeiHJyVwjBB0zRr/SHdCzp93Q5CqUlsor8iKydy+vV5eiK1c6l0zoKMb16x4DOHdu0ybVkBDzrCMJjhzBqZnQubNbB7msgKoqJjMP8vKkjXaGbdtqHzeOgMsV+GbQSLS8vGd6TC8xqqrs/kZtyVBz3DizM4uQ9euZykIIDGw0uXTmwp07xhXeQxMT++yPTxJj+/YmAzjZKTtb1d8/4CdzEVpUpC6dhURGNnUmG5I6iYNhw/pKvIgcPmwbj2MXkp1NJAkgD/+26mIzqBpf8DIaG9sQiAYPwYC02g0wc6a3jUsSw9H8fMu4tdTtGffUuKW6OlrNs0hGxtmo7K1qtm/vFsBZzVTVtm21F8vRGTO8ZdzWUAlHtm61r6093silrp/TDgYPlqFaiA4Z4rb9Ur6BoCB5v3Y/kpzsFoCxw38QxMfTitNI69be9i9rjE/h+HH7Roi+CmPHNvb5vsviR4kUFTlvJawV44E67hRAIjpmjFsALAB4/nlvG7d0rw08+BKjvTkKISENtbdmPDIyPl6k/taw7rtdEeuZiISFuQfQW/2gXz9fAQh6DkUdjsa2NzJ1B9qIX5pOyOy/Ozsaen2uX7iYGKh/WHhLNfPNoxAcbA9snQSiDecEPSzDkWPHXK4tW1TrG7Duaw2nkaNHG6yzkJt/1U89ALqZLuDv7ysAhOoxJCrKvu5IObJnT2MfL267+S01o6KKS7aUqen+ELS1Wn9DcnPdAvC5yrgC48fb13XJzQow7h63VoS7GbckQzkLlZX3k9mDrlzpFoAMxg+uXvUZgLr/DawZtCKrldysAONxP1adYOkGiYn9BySsFePGDbcA9CPtC1lZPgNg9ZNKDmRmngrd+ImaQUFWUrOSm6QQAbdvN7Wu1M24fCijYNw454W4KSI7dzbUvh6AloUtTqPz5lGkA2HxYp+tiDQ6IqGhftGObDhwwApgFgiz2lGChoVxg4OwYAH57IQzZyjiIty9a39a95dqAMyfX5OvN9GwMHfG/1ed/gTuYo55qabQhQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wMi0xN1QwMTozNzoxNSswMDowMAM1dbEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDItMTdUMDE6Mzc6MTUrMDA6MDByaM0NAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAyLTE3VDAxOjM3OjE1KzAwOjAwJX3s0gAAAABJRU5ErkJggg==",alt:""}),(0,nb.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfnAhEBJSpnepEGAAAEEklEQVRo3u2YX0yVZRzHP7+XI7JaTCxsNvFff4wb0Oom3FoXLrYwvPGCIxyOOlobWaAwdhZC6jwHyQMLsYgDJ2HIEXBtzZzW2tJaW1qEwvqjaJ4WmTS8SBorez3n10Wc4+LADnfvaZ3P3ft9nu+z5/vsfX/vfg8kSZLk/4xc2XFqVMMLF06lTTrB7Wa7LkaKiniQTWCa4qERfL4c76Wr0NgosldEwuHIAt9uHujXcGqqOR6uhj17eJEJxOEgV4/AsmVWB4ySylG4fl3OaT8aCNwztOgXqKuTi18eS9NwUxOpHEF27ZrzpNLlJFRW5q4u6hVpaYnow1WB86r796tDrkFtrdU5581GbqFer0EThciWLXENLnWgJSUzZd0gL8M8/InGej5BSkoMnpcTcOdOXEOWlCCmOVOWTXw4L3+i8QCFYJqGluof4PfHm68efQg6O2P0XoLz8ScacllC0NkpAwMDA6opKY/5QtuhqoopPoPiYvmJ1+D2bS5oFurz5WTafYjfLyIioho9AH1dVQ1jeMfjvVBRIW+JFy0t1ePagaxYYXXQKM2kwNiY9shx9OjRK0PGOqS52eptJUliMTL4Vfs7Gl6wwNZ631Jk927pk/Vgt7OU1WCa4R91EDo61mJ/FFpaZtaAM3pGNWyzZewfzwOXiwIKEIeDH8iHzEyrA0aDFrMKbt4M3+Z+CARCg5PtqNstF98OBFUbGsiTc+ByzbnAVTkE5eW5m4u+EGlri+jDG/q6Vevr1aupsHev1UHniy7ia/B4DOk3ngCnM67hSX6GrVtj9CptnU1PdAyn+GHbNoNB9cPdV3pOPtc30VnmHaIYvdsb/FfQNs2DcNjQdVKBdnfHM0gbJ5GurpiBDpxIfH+iIX6th66uaBFMeSr9JaS2Vi7gni6Cm8E0xctp1OfL8RZVIq2tcxXBxd+NX0NqavRTnoHSUjJ5H5YssTpolIf5CCYm5BvOQyBgZk8WoB6P1dtKksRiJPoNZ/x6AKmu1mzNB7udJWIH09QGXYW2t6/NLjqNdHbO1QyNPLtmCnbuxJRXwOHQnZTD8uVWB4wy3QyxixAEAqOaEgSv15bhvHECqavTs7IS6uuBy9PR9gDIX4D4fCPV/ZkQ+d3dbX9HMrIPQE2NntWV0NAAPDc9dNXqzP+iDSAj45+HnJw1I6EApKUZ8p6EoKwsnl9/1zVo7Dx9WtNm0xMdVfkYysoM3UgfGEY8g/xGHdhsMQOv0ovE9yccp7QQbDaDLBlDe3vjGrL4Hnp6Yg5mm4zCPPwJhuTru2hPj3Hvn+ndUFsrQ/oCevBg5PqYGzRBMMgVHgGXK8d7qRI5fHjmQuYHt95A9+2THl0NbjcdhGBszOqAMURyrSQIjY2Ra3Grt5UkSRJr+RucbbZqpo5VrQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wMi0xN1QwMTozNzo0MiswMDowMI5yRVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDItMTdUMDE6Mzc6NDIrMDA6MDD/L/3nAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAyLTE3VDAxOjM3OjQyKzAwOjAwqDrcOAAAAABJRU5ErkJggg==",alt:""})]})]}),(0,nb.jsx)(sb,{}),(0,nb.jsx)(gb,{})]})},bb=function(){var t,n=s((0,e.useState)([]),2),r=n[0],i=n[1],a=(0,e.useContext)(rb).currentUser,o=(0,e.useContext)(ab).dispatch;(0,e.useEffect)((function(){a.uid&&function(){var e=rp(Mh(tb,"userChats",a.uid),(function(e){i(e.data())}))}()}),[a.uid]);return(0,nb.jsx)("div",{className:"chats",children:null===(t=Object.entries(r))||void 0===t?void 0:t.sort((function(e,t){return t[1].date-e[1].date})).map((function(e){var t;return(0,nb.jsxs)("div",{className:"userChat",onClick:function(){return t=e[1].userInfo,void o({type:"CHANGE_USER",payload:t});var t},children:[(0,nb.jsx)("img",{src:e[1].userInfo.photoURL,alt:""}),(0,nb.jsxs)("div",{className:"userChatInfo",children:[(0,nb.jsx)("span",{children:e[1].userInfo.displayName}),(0,nb.jsx)("p",{children:null===(t=e[1].lastMessage)||void 0===t?void 0:t.text})]})]},e[0])}))})},wb=function(){var t=(0,e.useContext)(rb).currentUser;return(0,nb.jsxs)("div",{className:"navbar",children:[(0,nb.jsx)("span",{className:"logo",children:"Giga Chat"}),(0,nb.jsxs)("div",{className:"user",children:[(0,nb.jsx)("img",{src:t.photoURL,alt:""}),(0,nb.jsx)("span",{children:t.displayName}),(0,nb.jsx)("button",{onClick:function(){return function(e){return ne(e).signOut()}($k)},children:"Logout"})]})]})},_b=function(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(null),2),a=i[0],o=i[1],u=s((0,e.useState)(!1),2),c=u[0],l=u[1],f=(0,e.useContext)(rb).currentUser,h=function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ud(Lh(tb,"users"),Vd("displayName","==",n)),e.prev=1,e.next=4,ep(t);case 4:e.sent.forEach((function(e){o(e.data())})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=g(y().mark((function e(){var t,n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.uid>a.uid?f.uid+a.uid:a.uid+f.uid,e.prev=1,e.next=4,Zd(Mh(tb,"chats",t));case 4:if(e.sent.exists()){e.next=12;break}return e.next=8,tp(Mh(tb,"chats",t),{messages:[]});case 8:return e.next=10,np(Mh(tb,"userChats",f.uid),(I(n={},t+".userInfo",{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL}),I(n,t+".date",op()),n));case 10:return e.next=12,np(Mh(tb,"userChats",a.uid),(I(r={},t+".userInfo",{uid:f.uid,displayName:f.displayName,photoURL:f.photoURL}),I(r,t+".date",op()),r));case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return(0,nb.jsxs)("div",{className:"search",children:[(0,nb.jsx)("div",{className:"searchForm",children:(0,nb.jsx)("input",{type:"text",placeholder:"Find a user",onKeyDown:function(e){"Enter"===e.code&&h()},onChange:function(e){return r(e.target.value)},value:n})}),c&&(0,nb.jsx)("span",{children:"User not found"}),a&&(0,nb.jsxs)("div",{className:"userChat",onClick:d,children:[(0,nb.jsx)("img",{src:a.photoURL,alt:""}),(0,nb.jsx)("div",{className:"userChatInfo",children:(0,nb.jsx)("span",{children:a.displayName})})]})]})},Eb=function(){return(0,nb.jsxs)("div",{className:"sidebar",children:[(0,nb.jsx)(wb,{}),(0,nb.jsx)(_b,{}),(0,nb.jsx)(bb,{})]})},xb=function(){return(0,nb.jsx)("div",{className:"home",children:(0,nb.jsxs)("div",{className:"container",children:[(0,nb.jsx)(Eb,{}),(0,nb.jsx)(kb,{})]})})};function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ab.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(yb||(yb={}));var Tb,Sb="popstate";function Ib(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Cb(e,t){return{usr:e.state,key:e.key,idx:t}}function Nb(e,t,n,r){return void 0===n&&(n=null),Ab({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Db(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Rb(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Db(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ob(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=yb.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=yb.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:Rb(e);return Ib(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(Ab({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Sb,p),f=e,function(){o.removeEventListener(Sb,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=yb.Push;var r=Nb(y.location,e,t);n&&n(r,e);var i=Cb(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=yb.Replace;var r=Nb(y.location,e,t);n&&n(r,e);var i=Cb(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}function Pb(e,t,n){void 0===n&&(n="/");var r=Qb(("string"===typeof t?Db(t):t).pathname||"/",n);if(null==r)return null;var i=Lb(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Wb(i[o],Kb(r));return a}function Lb(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Ib(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=$b([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(Ib(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),Lb(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Hb(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=p(Mb(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function Mb(e){var t=e.split("/");if(0===t.length)return[];var n,r=i(n=t)||_(n)||o(n)||u(),a=r[0],s=r.slice(1),c=a.endsWith("?"),l=a.replace(/\?$/,"");if(0===s.length)return c?[l,""]:[l];var f=Mb(s.join("/")),h=[];return h.push.apply(h,E(f.map((function(e){return""===e?l:[l,e].join("/")})))),c&&h.push.apply(h,E(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Tb||(Tb={}));var Ub=/^:\w+$/,Fb=3,Vb=2,jb=1,zb=10,Bb=-2,qb=function(e){return"*"===e};function Hb(e,t){var n=e.split("/"),r=n.length;return n.some(qb)&&(r+=Bb),t&&(r+=Vb),n.filter((function(e){return!qb(e)})).reduce((function(e,t){return e+(Ub.test(t)?Fb:""===t?jb:zb)}),r)}function Wb(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Gb({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:$b([i,l.pathname]),pathnameBase:ew($b([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=$b([i,l.pathnameBase]))}return a}function Gb(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Yb("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Yb(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function Kb(e){try{return decodeURI(e)}catch(t){return Yb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Qb(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Yb(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Xb(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Jb(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Zb(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Db(e):(Ib(!(i=Ab({},e)).pathname||!i.pathname.includes("?"),Xb("?","pathname","search",i)),Ib(!i.pathname||!i.pathname.includes("#"),Xb("#","pathname","hash",i)),Ib(!i.search||!i.search.includes("#"),Xb("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Db(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:tw(a),hash:nw(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var $b=function(e){return e.join("/").replace(/\/\/+/g,"/")},ew=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},tw=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},nw=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},rw=function(e){k(n,e);var t=w(n);function n(){return x(this,n),t.apply(this,arguments)}return S(n)}(C(Error));function iw(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var aw=["post","put","patch","delete"],ow=(new Set(aw),["get"].concat(aw));new Set(ow),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uw.apply(this,arguments)}var sw="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},cw=e.useState,lw=e.useEffect,fw=e.useLayoutEffect,hw=e.useDebugValue;function dw(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!sw(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var pw=e.createContext(null);var vw=e.createContext(null);var yw=e.createContext(null);var mw=e.createContext(null);var gw=e.createContext(null);var kw=e.createContext({outlet:null,matches:[]});var bw=e.createContext(null);function ww(){return null!=e.useContext(gw)}function _w(){return ww()||Ib(!1),e.useContext(gw).location}function Ew(){ww()||Ib(!1);var t=e.useContext(mw),n=t.basename,r=t.navigator,i=e.useContext(kw).matches,a=_w().pathname,o=JSON.stringify(Jb(i).map((function(e){return e.pathnameBase}))),u=e.useRef(!1);e.useEffect((function(){u.current=!0}));var s=e.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=Zb(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:$b([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function xw(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(kw).matches,a=_w().pathname,o=JSON.stringify(Jb(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return Zb(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function Aw(){var t=function(){var t,n=e.useContext(bw),r=Rw(Sw.UseRouteError),i=Dw(Sw.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=iw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var Tw,Sw,Iw=function(t){k(r,t);var n=w(r);function r(e){var t;return x(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return S(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(kw.Provider,{value:this.props.routeContext},e.createElement(bw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function Cw(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(pw);return a&&a.static&&a.staticContext&&r.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(kw.Provider,{value:n},i)}function Nw(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Ib(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(t,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||e.createElement(Aw,null):null,l=n.concat(i.slice(0,u+1)),f=function(){return e.createElement(Cw,{match:o,routeContext:{outlet:t,matches:l}},s?c:void 0!==o.route.element?o.route.element:t)};return r&&(o.route.errorElement||0===u)?e.createElement(Iw,{location:r.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Rw(t){var n=e.useContext(vw);return n||Ib(!1),n}function Dw(t){var n=function(t){var n=e.useContext(kw);return n||Ib(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Ib(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Tw||(Tw={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Sw||(Sw={}));var Ow;function Pw(t){var n=t.to,r=t.replace,i=t.state,a=t.relative;ww()||Ib(!1);var o=e.useContext(vw),u=Ew();return e.useEffect((function(){o&&"idle"!==o.navigation.state||u(n,{replace:r,state:i,relative:a})})),null}function Lw(e){Ib(!1)}function Mw(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,u=t.navigationType,s=void 0===u?yb.Pop:u,c=t.navigator,l=t.static,f=void 0!==l&&l;ww()&&Ib(!1);var h=r.replace(/^\/*/,"/"),d=e.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Db(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,E=p.key,x=void 0===E?"default":E,A=e.useMemo((function(){var e=Qb(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:_,key:x}}),[h,y,g,b,_,x]);return null==A?null:e.createElement(mw.Provider,{value:d},e.createElement(gw.Provider,{children:a,value:{location:A,navigationType:s}}))}function Uw(t){var n=t.children,r=t.location,i=e.useContext(pw);return function(t,n){ww()||Ib(!1);var r,i=e.useContext(mw).navigator,a=e.useContext(vw),o=e.useContext(kw).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,_w());if(n){var f,h="string"===typeof n?Db(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||Ib(!1),r=h}else r=l;var d=r.pathname||"/",p=Pb(t,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=Nw(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:$b([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:$b([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?e.createElement(gw.Provider,{value:{location:uw({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:yb.Pop}},v):v}(i&&!n?i.router.routes:Vw(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ow||(Ow={}));var Fw=new Promise((function(){}));e.Component;function Vw(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==Lw&&Ib(!1),t.props.index&&t.props.children&&Ib(!1);var a=[].concat(E(n),[i]),o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=Vw(t.props.children,a)),r.push(o)}else r.push.apply(r,Vw(t.props.children,n))})),r}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jw.apply(this,arguments)}function zw(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Bw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function qw(t){var n,r=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),Ob((function(e,t){var n=e.location;return Nb("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Rb(t)}),null,n)));var u=o.current,c=s(e.useState({action:u.action,location:u.location}),2),l=c[0],f=c[1];return e.useLayoutEffect((function(){return u.listen(f)}),[u]),e.createElement(Mw,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}var Hw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ww=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,u=t.replace,s=t.state,c=t.target,l=t.to,f=t.preventScrollReset,h=zw(t,Bw),d=!1;if(Hw&&"string"===typeof l&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(l)){r=l;var p=new URL(window.location.href),v=l.startsWith("//")?new URL(p.protocol+l):new URL(l);v.origin===p.origin?l=v.pathname+v.search+v.hash:d=!0}var y=function(t,n){var r=(void 0===n?{}:n).relative;ww()||Ib(!1);var i=e.useContext(mw),a=i.basename,o=i.navigator,u=xw(t,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:$b([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),m=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=Ew(),l=_w(),f=xw(t,{relative:s});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:Rb(l)===Rb(f);c(t,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,t,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return e.createElement("a",jw({},h,{href:r||y,onClick:d||o?i:function(e){i&&i(e),e.defaultPrevented||m(e)},ref:n,target:c}))}));var Gw,Kw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Gw||(Gw={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Kw||(Kw={}));var Qw=n.p+"static/media/photo.9789e022157f5994cdc5.png",Yw=function(){var t=s((0,e.useState)(!1),2),n=t[0],r=t[1],i=Ew(),a=function(){var e=g(y().mark((function e(t){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target[0].value,a=t.target[1].value,e.prev=3,e.next=6,xy($k,n,a);case 6:i("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r(!0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,nb.jsx)("div",{className:"formContainer",children:(0,nb.jsxs)("div",{className:"formWrapper",children:[(0,nb.jsx)("span",{className:"logo",children:"Giga Chat"}),(0,nb.jsx)("span",{className:"title",children:"Login"}),(0,nb.jsxs)("form",{onSubmit:a,children:[(0,nb.jsx)("input",{type:"email",placeholder:"Email"}),(0,nb.jsx)("input",{type:"password",placeholder:"Password"}),(0,nb.jsx)("button",{children:"Sign in"}),n&&(0,nb.jsx)("span",{children:"Something went wrong"})]}),(0,nb.jsxs)("p",{children:["You don't have an account? ",(0,nb.jsx)(Ww,{to:"/register",children:"Register"})]})]})})},Xw=function(){var t=s((0,e.useState)(!1),2),n=t[0],r=t[1],i=Ew(),a=function(){var e=g(y().mark((function e(t){var n,a,o,u,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target[0].value,a=t.target[1].value,o=t.target[2].value,u=t.target[3].files[0],e.prev=5,e.next=8,_y($k,a,o);case 8:s=e.sent,c=Yk(eb,n),(l=Kk(c,u)).on((function(e){r(!0)}),(function(){Qk(l.snapshot.ref).then(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sy(s.user,{displayName:n,photoURL:t});case 2:return e.next=4,tp(Mh(tb,"users",s.user.uid),{uid:s.user.uid,displayName:n,email:a,photoURL:t});case 4:return e.next=6,tp(Mh(tb,"userChats",s.user.uid),{});case 6:i("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),r(!0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,nb.jsx)("div",{className:"formContainer",children:(0,nb.jsxs)("div",{className:"formWrapper",children:[(0,nb.jsx)("span",{className:"logo",children:"Giga Chat"}),(0,nb.jsx)("span",{className:"title",children:"Register"}),(0,nb.jsxs)("form",{onSubmit:a,children:[(0,nb.jsx)("input",{type:"text",placeholder:"Display name"}),(0,nb.jsx)("input",{type:"email",placeholder:"Email"}),(0,nb.jsx)("input",{type:"password",placeholder:"Password"}),(0,nb.jsx)("input",{style:{display:"none"},type:"file",id:"file"}),(0,nb.jsxs)("label",{htmlFor:"file",children:[(0,nb.jsx)("img",{src:Qw,alt:""}),(0,nb.jsx)("span",{children:"Add an avatar"})]}),(0,nb.jsx)("button",{children:"Sign Up"}),n&&(0,nb.jsx)("span",{children:"Something went wrong"})]}),(0,nb.jsxs)("p",{children:["You do have an account? ",(0,nb.jsx)(Ww,{to:"/login",children:"Login"})]})]})})};var Jw=function(){var t=(0,e.useContext)(rb).currentUser,n=function(e){var n=e.children;return t?n:(0,nb.jsx)(Pw,{to:"/login"})};return(0,nb.jsx)(qw,{children:(0,nb.jsx)(Uw,{children:(0,nb.jsxs)(Lw,{path:"/",children:[(0,nb.jsx)(Lw,{index:!0,element:(0,nb.jsx)(n,{children:(0,nb.jsx)(xb,{})})}),(0,nb.jsx)(Lw,{path:"login",element:(0,nb.jsx)(Yw,{})}),(0,nb.jsx)(Lw,{path:"register",element:(0,nb.jsx)(Xw,{})})]})})})};r.createRoot(document.getElementById("root")).render((0,nb.jsx)(ib,{children:(0,nb.jsx)(ob,{children:(0,nb.jsx)(e.StrictMode,{children:(0,nb.jsx)(Jw,{})})})}))}()}();
//# sourceMappingURL=main.a96746b2.js.map